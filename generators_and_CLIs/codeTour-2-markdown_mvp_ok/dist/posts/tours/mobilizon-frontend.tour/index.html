<!doctype html>   
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet">
    <title>Frontend basic tour</title>
    <style>
    body{
        font-family: Arial;
        padding: 1rem;
    }
    /* Style the button that is used to open and close the collapsible content */
    .collapsible {
    background-color: #eee;
    color: #444;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    }

    /* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
    .active, .collapsible:hover {
    background-color: #ccc;
    }

    /* Style the collapsible content. Note: hidden by default */
    .content {
    padding: 0 18px;
    display: none;
    overflow: hidden;
    background-color: #f1f1f1;
    }
    </style>
  </head>
  <body>
    <h1>Frontend basic tour</h1>
<p>Git repo that reference the code tour : <a href="https://framagit.org/framasoft/mobilizon">https://framagit.org/framasoft/mobilizon</a>.
On branch or commit <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74">&quot;09cc5d1bd1ecd24e1e879b0392cf5830b2581c74&quot;</a>.</p>
<h2>Html entry point : <code>public/index.html</code></h2>
<p>This <code>public/index.html</code> is the first file that is loaded by the browser.
It loads the bundled VueJs application as a script.
The rendering of the application is then delegated to javascript.</p>
<p>The VueJs app is &quot;injected&quot; inside the <code>&lt;div is=&quot;app&quot;&gt;&lt;/div&gt;</code> element.</p>
<p>The bundled javascript script will be inserted in the <code>index.html</code> file in place of the comment : <code>&lt;!-- built files will be auto injected --&gt;</code></p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/public/index.html">js/public/index.html</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width,initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%= BASE_URL %>favicon.ico<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>server-injected-data<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><br>        <span class="token punctuation">></span></span>We're sorry but &lt;%= htmlWebpackPlugin.options.title %> doesn't work<br><span class="highlight-line">        properly without JavaScript enabled. Please enable it to</span><br>        continue.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token comment">&lt;!-- built files will be auto injected --></span></mark><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>The <code>main.ts</code> VueJs entry point</h2>
<p>This <code>main.ts</code> is the root Typescript file of the VueJs application.</p>
<p>It initializes the root component. It is automatically injected at the end of the <a href="js/src/public/index.html"><code>&quot;public/index.html&quot;</code></a> file after being bundled.</p>
<p>It will load the various required dependencies such as :</p>
<ul>
<li>The <code>App.vue</code> entry point template</li>
<li>This entry point is fed with a few features such as
<ul>
<li>A <code>router</code> to load the appropriate Vue components depending on the browser's URL</li>
<li><code>apolloProvider</code> to allow to communicate with the server GraphQL API</li>
<li><code>i18n</code> to handle text internationalization</li>
</ul>
</li>
</ul>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/main.ts">js/src/main.ts</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-ts"><code class="language-ts"><span class="highlight-line"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Buefy <span class="token keyword">from</span> <span class="token string">"buefy"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">"vue-class-component"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> VueScrollTo <span class="token keyword">from</span> <span class="token string">"vue-scrollto"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> VueMeta <span class="token keyword">from</span> <span class="token string">"vue-meta"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> VTooltip <span class="token keyword">from</span> <span class="token string">"v-tooltip"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"./router"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> NotifierPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./plugins/notifier"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> filters <span class="token keyword">from</span> <span class="token string">"./filters"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> i18n <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./utils/i18n"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> apolloProvider <span class="token keyword">from</span> <span class="token string">"./vue-apollo"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./registerServiceWorker"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Buefy<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>NotifierPlugin<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueMeta<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueScrollTo<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VTooltip<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// Register the router hooks with their names</span></span><br><span class="highlight-line">Component<span class="token punctuation">.</span><span class="token function">registerHooks</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span><br><span class="highlight-line">  <span class="token string">"beforeRouteEnter"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"beforeRouteLeave"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"beforeRouteUpdate"</span><span class="token punctuation">,</span> <span class="token comment">// for vue-router 2.2+</span></span><br><span class="highlight-line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">/* eslint-disable no-new */</span></span><br><span class="highlight-line"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  router<span class="token punctuation">,</span></span><br><span class="highlight-line">  apolloProvider<span class="token punctuation">,</span></span><br><span class="highlight-line">  el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">  template<span class="token operator">:</span> <span class="token string">"&lt;App/>"</span><span class="token punctuation">,</span></mark><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  i18n<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>App.vue entry point and <code>&lt;main&gt;</code></h2>
<p>The <code>App.vue</code> is the entry point single file component (root component) of the Single Page Application (SPA).</p>
<p>The <code>&lt;main&gt;</code> component that is resolved by the router. The component <code>&lt;router-view/&gt;</code> is replaced depending on the view component resolved by the router.</p>
<p>The component to replace <code>&lt;router-view/&gt;</code> depends on the rules found in the <a href="js/src/router/index.ts"><code>router/index.ts</code></a> file.</p>
<h2>Go further</h2>
<ul>
<li><a href="https://v3.vuejs.org/guide/single-file-component.html">Single File Components</a></li>
<li><a href="https://v3.vuejs.org/guide/instance.html#the-root-component">Application root component</a></li>
</ul>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/App.vue">js/src/App.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mobilizon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavBar</span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; config.demoMode<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Warning<span class="token punctuation">'</span>).toLocaleUpperCase()<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">closable</span></span><br><span class="highlight-line">        <span class="token attr-name">aria-close-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Close<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("This is a demonstration site to test Mobilizon.") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>{{ $t("Please do not use it in any real way.") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $t(</span><br><span class="highlight-line">              "This website isn't moderated and the data that you enter will be automatically destroyed every day at 00:01 (Paris timezone)."</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token attr-name">:error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mobilizon-footer</span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">"./components/NavBar.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">AUTH_ACCESS_TOKEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">AUTH_USER_EMAIL</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">AUTH_USER_ID</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">AUTH_USER_ROLE</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./constants"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">UPDATE_CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Footer <span class="token keyword">from</span> <span class="token string">"./components/Footer.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Logo <span class="token keyword">from</span> <span class="token string">"./components/Logo.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> initializeCurrentActor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./utils/auth"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> jwt_decode<span class="token punctuation">,</span> <span class="token punctuation">{</span> JwtPayload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"jwt-decode"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> refreshAccessToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./apollo/utils"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Logo<span class="token punctuation">,</span></span><br><span class="highlight-line">    NavBar<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "editor" */</span> <span class="token string">"./components/Error.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mobilizon-footer"</span><span class="token operator">:</span> Footer<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  error<span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  online <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  interval<span class="token operator">:</span> number <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initializeCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">await</span> <span class="token function">initializeCurrentActor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>defaultClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">errorCaptured</span><span class="token punctuation">(</span>error<span class="token operator">:</span> Error<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> error<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">initializeCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> userId <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">AUTH_USER_ID</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> userEmail <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">AUTH_USER_EMAIL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> accessToken <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">AUTH_ACCESS_TOKEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> role <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">AUTH_USER_ROLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">&amp;&amp;</span> userEmail <span class="token operator">&amp;&amp;</span> accessToken <span class="token operator">&amp;&amp;</span> role<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        mutation<span class="token operator">:</span> <span class="token constant">UPDATE_CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> userId<span class="token punctuation">,</span></span><br><span class="highlight-line">          email<span class="token operator">:</span> userEmail<span class="token punctuation">,</span></span><br><span class="highlight-line">          isLoggedIn<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          role<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>online <span class="token operator">=</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>onLine<span class="token punctuation">;</span></span><br><span class="highlight-line">    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"offline"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>online <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showOfflineNetworkWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"offline"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"online"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>online <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"online"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"refreshApp"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$buefy<span class="token punctuation">.</span>snackbar<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        queue<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        indefinite<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        type<span class="token operator">:</span> <span class="token string">"is-secondary"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        actionText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Update app"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">        cancelText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">        message<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"A new version is available."</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token function-variable function">onAction</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">          <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> detail <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> registration <span class="token operator">=</span> detail <span class="token keyword">as</span> ServiceWorkerRegistration<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refreshApp</span><span class="token punctuation">(</span>registration<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span></span><br><span class="highlight-line">                <span class="token string">"An error has occured while refreshing the page."</span></span><br><span class="highlight-line">              <span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> accessToken <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">AUTH_ACCESS_TOKEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>accessToken<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> token <span class="token operator">=</span> jwt_decode<span class="token operator">&lt;</span>JwtPayload<span class="token operator">></span><span class="token punctuation">(</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          token<span class="token operator">?.</span>exp <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">          <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>exp <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">-</span> <span class="token number">60000</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token function">refreshAccessToken</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span><span class="token function">getClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">refreshApp</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    registration<span class="token operator">:</span> ServiceWorkerRegistration</span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>any<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> worker <span class="token operator">=</span> registration<span class="token punctuation">.</span>waiting<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>worker<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Doing worker.skipWaiting()."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Done worker.skipWaiting()."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token function">reject</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token function">resolve</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"calling skip waiting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      worker<span class="token operator">?.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"skip-waiting"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>channel<span class="token punctuation">.</span>port2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">showOfflineNetworkWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"You are offline"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"variables"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">/* Icons */</span></span><br><span class="highlight-line">$<span class="token property">mdi-font-path</span><span class="token punctuation">:</span> <span class="token string">"~@mdi/font/fonts"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~@mdi/font/scss/materialdesignicons"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"common"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#mobilizon</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">main</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">flex-grow</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Basic URL routing</h2>
<p>If the URL typed in the browser is <code>/</code> (ex. <code>https://mobilizon.fr/</code>),
the router resolves to the <code>Home</code> component.
It means that the <code>&lt;main&gt;&lt;/main&gt;</code> element of the <a href="./js/src/App.vue"><code>App.vue</code></a> entry point will be replaced with the <a href="./js/src/views/Home.vue"><code>views/Home.vue</code></a> component.
Since it does not require authentication, even if no user is authenticated, the <code>Home</code> view will be rendered.</p>
<h3>Go further</h3>
<ul>
<li><a href="https://vuejs.org/v2/guide/routing.html">Official VueJs routing documentation</a></li>
</ul>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/router/index.ts">js/src/router/index.ts</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-ts"><code class="language-ts"><span class="highlight-line"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Router<span class="token punctuation">,</span> <span class="token punctuation">{</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> VueScrollTo <span class="token keyword">from</span> <span class="token string">"vue-scrollto"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> PositionResult <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-router/types/router.d"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ImportedComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue/types/options"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">"../views/Home.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> eventRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> actorRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> errorRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./error"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> authGuardIfNeeded <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./guards/auth-guard"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> settingsRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./settings"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> groupsRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./groups"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> discussionRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./discussion"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> userRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"./name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">scrollBehavior</span><span class="token punctuation">(</span></span><br><span class="highlight-line">  to<span class="token operator">:</span> Route<span class="token punctuation">,</span></span><br><span class="highlight-line">  from<span class="token operator">:</span> Route<span class="token punctuation">,</span></span><br><span class="highlight-line">  savedPosition<span class="token operator">:</span> <span class="token builtin">any</span></span><br><span class="highlight-line"><span class="token punctuation">)</span><span class="token operator">:</span> PositionResult <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    VueScrollTo<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>hash<span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      selector<span class="token operator">:</span> to<span class="token punctuation">.</span>hash<span class="token punctuation">,</span></span><br><span class="highlight-line">      offset<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> savedPosition<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">  <span class="token operator">...</span>userRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>eventRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>settingsRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>actorRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>groupsRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>discussionRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token operator">...</span>errorRoutes<span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/search"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">SEARCH</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "Search" */</span> <span class="token string">"@/views/Search.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    path<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span></mark><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">HOME</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> Home<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/about"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">ABOUT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "about" */</span> <span class="token string">"@/views/About.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    redirect<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">ABOUT_INSTANCE</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    children<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        path<span class="token operator">:</span> <span class="token string">"instance"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">ABOUT_INSTANCE</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">          <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">            <span class="token comment">/* webpackChunkName: "about" */</span> <span class="token string">"@/views/About/AboutInstance.vue"</span></span><br><span class="highlight-line">          <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        path<span class="token operator">:</span> <span class="token string">"/terms"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">TERMS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">          <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "cookies" */</span> <span class="token string">"@/views/About/Terms.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        path<span class="token operator">:</span> <span class="token string">"/privacy"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">PRIVACY</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">          <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "cookies" */</span> <span class="token string">"@/views/About/Privacy.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        path<span class="token operator">:</span> <span class="token string">"/rules"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">RULES</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">          <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "cookies" */</span> <span class="token string">"@/views/About/Rules.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        path<span class="token operator">:</span> <span class="token string">"/glossary"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">GLOSSARY</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">          <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">            <span class="token comment">/* webpackChunkName: "cookies" */</span> <span class="token string">"@/views/About/Glossary.vue"</span></span><br><span class="highlight-line">          <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/interact"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">INTERACT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "interact" */</span> <span class="token string">"@/views/Interact.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/auth/:provider/callback"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> <span class="token string">"auth-callback"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "ProviderValidation" */</span> <span class="token string">"@/views/User/ProviderValidation.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/welcome/:step?"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "WelcomeScreen" */</span> <span class="token string">"@/views/User/SettingsOnboard.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token punctuation">(</span>route<span class="token operator">:</span> Route<span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> step <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>step<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> step <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/404"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">PAGE_NOT_FOUND</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "PageNotFound" */</span> <span class="token string">"../views/PageNotFound.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    redirect<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">PAGE_NOT_FOUND</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  scrollBehavior<span class="token punctuation">,</span></span><br><span class="highlight-line">  mode<span class="token operator">:</span> <span class="token string">"history"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  base<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  routes<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span>authGuardIfNeeded<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span>app<span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      router<span class="token punctuation">.</span>app<span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>error <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Conditional rendering</h2>
<p>The <code>v-if</code> directive tells if an element is rendered or not.</p>
<p>For instance, if the user is not registered of logged in, this section is shown.
To know if the user is registered of logged in, <code>config</code> and <code>currentUser</code> variables are looked up.</p>
<p>The presence of <code>currentUser</code> variable is the result of a GraphQL query (see <code>CURRENT_USER_CLIENT</code>).
The presence of <code>config</code> variable is the result of a GraphQL query (see <code>CONFIG</code>).</p>
<h3>Go further</h3>
<ul>
<li><a href="https://vuejs.org/v2/guide/conditional.html">Official VueJs conditional rendering documentation</a></li>
</ul>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><mark class="highlight-line highlight-line-active">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></mark><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    events<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>GraphQL data fetching using apollo</h2>
<p>This <code>@Component</code> annotation and the <code>apollo</code> attribute describes the GraphQL queries upon which the component relies on to be rendered.</p>
<p>Data such as the following may be fetched from GraphQL:</p>
<ul>
<li><code>events</code> : A list of Mobilizon Events</li>
<li><code>currentActor</code> : Informations about the current actor connected</li>
<li><code>currentUser</code> : Informations about the current user connected</li>
<li><code>loggedUser</code> : A flag to know if a user is logged-in</li>
<li><code>config</code> : Configuration that could be retrieved about the server</li>
<li><code>currentUserParticipations</code> : Events in which the current user takes part</li>
<li><code>closeEvents</code> : Events that are geographically close to the user's location</li>
</ul>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    events<span class="token operator">:</span> <span class="token punctuation">{</span></mark><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2><code>get</code> functions in view templates</h2>
<p>Most of the <code>get</code> prefixed function are referred in the <code>&lt;template&gt;&lt;/template&gt;</code> section so most of the computation is done in the <code>&lt;script&gt;&lt;/script&gt;</code> part of the file.</p>
<p>In the <code>&lt;template&gt;&lt;/template</code> part only view rendering computations are done (conditional rendering, collection pagination, internationalization...).</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    events<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></mark><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>I18n internationalized string 1/2</h2>
<p>Depending on the current language, <code>&quot;Last published events&quot;</code> will be replaced with another text.</p>
<p>Ex. If language is french, the string will be looked up in the <a href="./js/src/i18n/fr_FR.json"><code>i18n/fr_FR.json</code></a> file.</p>
<pre class="language-js"><code class="language-js">   <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Last published events"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<p>Abstract of <code>fr_FR.json</code>.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br><br>   <span class="token property">"Last published events"</span><span class="token operator">:</span> <span class="token string">"Derniers vnements publis"</span><span class="token punctuation">,</span><br><br><span class="token punctuation">}</span></code></pre>
<p>In this case the french translation will be : &quot;Derniers vnements publis&quot;.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    events<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>I18n internationalized string 2/2</h2>
<p>Another way to translate text is by using <code>&lt;i18n&gt;&lt;/i18n&gt;</code> element. I allows more complex text substitutions like parametrized text.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></mark><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    events<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Hyperlink with router 1/5 - <code>$router.push</code></h2>
<p>An hyperlink can be translated as a change of route with the router.</p>
<pre class="language-js"><code class="language-js">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>
<p>In this case, the uuid of the clicked Mobilizon Event is passed to the router to resolve the <code>EVENT</code> route which is the Event's detail page.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Home.vue">js/src/views/Home.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>homepage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ webp: supportsWebPFormat }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            {{ config.slogan || $t("Gather  Organize  Mobilize") }}</span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>            <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">              $t(<span class="token punctuation">'</span>Join &lt;b>{instance}&lt;/b>, a Mobilizon instance<span class="token punctuation">'</span>, {</span><br><span class="highlight-line">                instance: config.name,</span><br><span class="highlight-line">              })</span><br>            <span class="token punctuation">"</span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br>          <span class="token comment">&lt;!-- &lt;p v-if="!config.registrationsOpen"><br><span class="highlight-line">              {{ $t("This instance isn't opened to registrations, but you can register on other instances.") }}</span><br>          &lt;/p>--></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!config.registrationsOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">            $t("Unfortunately, this instance isn't opened to registrations")</span><br><span class="highlight-line">          }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.REGISTER }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.registrationsOpen<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("Create an account") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- We don't invite to find other instances yet --></span></span><br><span class="highlight-line">            <span class="token comment">&lt;!-- &lt;b-button v-else type="is-link" tag="a" href="https://joinmastodon.org">{{ $t('Find an instance') }}&lt;/b-button> --></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>router-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.ABOUT }<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              {{ $t("Learn more about {instance}", { instance: config.name }) }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recent_events<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("No events found")</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; (!currentUser.id || !currentActor.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-480w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1024px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 1920px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1920w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.webp<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><br><span class="highlight-line">            <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 1921px)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/jpeg<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line"></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br><span class="highlight-line">            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/pics/homepage-1024w.jpg<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3840<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2719<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A practical tool") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is a tool that helps you &lt;b>find, create and organise events&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("An ethical alternative") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Ethical alternative to Facebook events, groups and pages, Mobilizon is a &lt;b>tool designed to serve you&lt;/b>. Period.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("A federated software") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br>              <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  <span class="token punctuation">'</span>Mobilizon is not a giant platform, but a &lt;b>multitude of interconnected Mobilizon websites&lt;/b>.<span class="token punctuation">'</span></span><br><span class="highlight-line">                )</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary is-large<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://joinmobilizon.org<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("Learn more about Mobilizon") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config &amp;&amp; loggedUser &amp;&amp; loggedUser.settings<span class="token punctuation">"</span></span></span><br>    <span class="token punctuation">></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentActor.id &amp;&amp; (welcomeBack || newRegisteredUser)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>welcomeBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome back {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-info<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newRegisteredUser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">          $t("Welcome to Mobilizon, {username}!", {</span><br><span class="highlight-line">            username: currentActor.displayName(),</span><br><span class="highlight-line">          })</span><br><span class="highlight-line">        }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Your upcoming events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Your upcoming events") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row of goingToEvents<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upcoming-events<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row[0]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-component-container<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isToday(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event today.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isTomorrow(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $tc("You have one event tomorrow.", row[1].length, {</span><br><span class="highlight-line">                count: row[1].length,</span><br><span class="highlight-line">              })</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isInLessThanSevenDays(row[0])<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $tc("You have one event in {days} days.", row[1].length, {</span><br><span class="highlight-line">                  count: row[1].length,</span><br><span class="highlight-line">                  days: calculateDiffDays(row[0]),</span><br><span class="highlight-line">                })</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in thisWeek(row)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1].id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation[1]<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.MY_EVENTS }<span class="token punctuation">"</span></span><br><span class="highlight-line">            <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowMyUpcomingEvents &amp;&amp; canShowLastWeekEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Last week events --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Last week") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventListCard</span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation in lastWeekEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation.id<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">@event-deleted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDeleted<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ hideDate: false }<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">/></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowLastWeekEvents &amp;&amp; canShowCloseEvents<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token comment">&lt;!-- Events close to you --></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-close<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canShowCloseEvents<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Events nearby") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{</span><br><span class="highlight-line">            $tc(</span><br><span class="highlight-line">              "Within {number} kilometers of {place}",</span><br><span class="highlight-line">              loggedUser.settings.location.range,</span><br><span class="highlight-line">              {</span><br><span class="highlight-line">                number: loggedUser.settings.location.range,</span><br><span class="highlight-line">                place: loggedUser.settings.location.name,</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">            )</span><br><span class="highlight-line">          }}</span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.PREFERENCES }<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Change<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in closeEvents.elements.slice(0, 3)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-card</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-separator<span class="token punctuation">"</span></span></span><br>        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">          canShowMyUpcomingEvents || canShowLastWeekEvents || canShowCloseEvents</span><br>        <span class="token punctuation">"</span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>events-recent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("Last published events") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>On {instance} and other federated instances<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>instance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ config.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>this.events.total > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns is-multiline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event in this.events.elements.slice(0, 6)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.uuid<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>recent-event-card-wrapper</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>view-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.SEARCH }<span class="token punctuation">"</span></span><br><span class="highlight-line">              <span class="token punctuation">></span></span>{{ $t("View everything") }} >><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-message</span> <span class="token attr-name">v-else</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>{{ $t("No events found") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goingToEvents.size > 0 || lastWeekEvents.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>information-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>{{</span><br><span class="highlight-line">              $t("The events you created are not shown here.")</span><br><span class="highlight-line">            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-message</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventSortField<span class="token punctuation">,</span> ParticipantRole<span class="token punctuation">,</span> SortDirection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Paginate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/paginate"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> supportsWebPFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/support"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant<span class="token punctuation">,</span> Participant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span> <span class="token constant">FETCH_EVENTS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventListCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventListCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RecentEventCardWrapper <span class="token keyword">from</span> <span class="token string">"../components/Event/RecentEventCardWrapper.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IPerson<span class="token punctuation">,</span> Person <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ICurrentUser<span class="token punctuation">,</span> IUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/current-user.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span> <span class="token constant">USER_SETTINGS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/user"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateComponent <span class="token keyword">from</span> <span class="token string">"../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    events<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span> <span class="token comment">// Debug me: https://github.com/apollographql/apollo-client/issues/3030</span></span><br><span class="highlight-line">      variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        orderBy<span class="token operator">:</span> EventSortField<span class="token punctuation">.</span><span class="token constant">INSERTED_AT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        direction<span class="token operator">:</span> SortDirection<span class="token punctuation">.</span><span class="token constant">DESC</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>currentActor<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUser<span class="token operator">:</span> <span class="token constant">CURRENT_USER_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    loggedUser<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">USER_SETTINGS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"network-only"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentUserParticipations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">LOGGED_USER_PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> lastWeek <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        lastWeek<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          afterDateTime<span class="token operator">:</span> lastWeek<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        data<span class="token punctuation">.</span>loggedUser<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token punctuation">(</span><span class="token parameter">participation<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Participant</span><span class="token punctuation">(</span>participation<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    closeEvents<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CLOSE_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash<span class="token punctuation">,</span></span><br><span class="highlight-line">          radius<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>searchEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUser<span class="token operator">?.</span>isLoggedIn <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>geohash <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedUser<span class="token operator">?.</span>settings<span class="token operator">?.</span>location<span class="token operator">?.</span>range</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateComponent<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventListCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    RecentEventCardWrapper<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"settings-onboard"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./User/SettingsOnboard.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instanceName<span class="token punctuation">,</span></span><br><span class="highlight-line">      titleTemplate<span class="token operator">:</span> <span class="token string">"%s | Mobilizon"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  events<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  locations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  city <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  country <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUser<span class="token operator">!</span><span class="token operator">:</span> IUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loggedUser<span class="token operator">!</span><span class="token operator">:</span> ICurrentUser<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentUserParticipations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  supportsWebPFormat <span class="token operator">=</span> supportsWebPFormat<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  closeEvents<span class="token operator">:</span> Paginate<span class="token operator">&lt;</span>IEvent<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// get displayed_name() {</span></span><br><span class="highlight-line">  <span class="token comment">//   return this.loggedPerson &amp;&amp; this.loggedPerson.name === null</span></span><br><span class="highlight-line">  <span class="token comment">//     ? this.loggedPerson.preferredUsername</span></span><br><span class="highlight-line">  <span class="token comment">//     : this.loggedPerson.name;</span></span><br><span class="highlight-line">  <span class="token comment">// }</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">instanceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">welcomeBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">newRegisteredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"yes"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">thisWeek</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    row<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"welcome-back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"new-registered-user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">isToday</span><span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isTomorrow</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">&lt;</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">,</span> nbDays<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">>=</span> nbDays<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">isInLessThanSevenDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// eslint-disable-next-line class-methods-use-this</span></span><br><span class="highlight-line">  <span class="token function">calculateDiffDays</span><span class="token punctuation">(</span>date<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">thisWeekGoingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">goingToEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thisWeekGoingToEvents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span></span><br>        <span class="token parameter">acc<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">>></span><span class="token punctuation">,</span><br>        participation<span class="token operator">:</span> IParticipant</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> day <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> participations<span class="token operator">:</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IParticipant<span class="token operator">></span> <span class="token operator">=</span></span><br><span class="highlight-line">          acc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        participations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>participation<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">          participation</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        acc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> participations<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">lastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> role <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        event<span class="token punctuation">.</span>beginsOn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span> IParticipant<span class="token punctuation">,</span> b<span class="token operator">:</span> IParticipant</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">        a<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> res<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">eventDeleted</span><span class="token punctuation">(</span>eventid<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentUserParticipations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">participation</span><span class="token punctuation">)</span> <span class="token operator">=></span> participation<span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">!==</span> eventid</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">viewEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> IEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"loggedUser"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">detectEmptyUserSettings</span><span class="token punctuation">(</span>loggedUser<span class="token operator">:</span> IUser<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>loggedUser <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> loggedUser<span class="token punctuation">.</span>settings <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">WELCOME_SCREEN</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        params<span class="token operator">:</span> <span class="token punctuation">{</span> step<span class="token operator">:</span> <span class="token string">"1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowMyUpcomingEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goingToEvents<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowLastWeekEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastWeekEvents<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canShowCloseEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeEvents<span class="token punctuation">.</span>total <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bulma/sass/utilities/mixins.sass"</span><span class="token punctuation">;</span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">main > div > .container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.search-autocomplete</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.87<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.events-recent</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">&amp; > h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding-left</span><span class="token punctuation">:</span> 0.75rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.date-component-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0.5rem auto 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">h3.subtitle</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">span.view-all</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">section.hero</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token selector">&amp;.webp::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"../../public/img/pics/homepage_background-1024w.webp"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .hero-body</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1.5rem 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> $background-color<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.column figure.image img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.instance-description</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#recent_events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">min-height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 20px auto 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.columns</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#picture</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token selector">.picture-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">&amp; > img</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">max-height</span><span class="token punctuation">:</span> 80vh<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.container.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@include</span> tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> -4rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.buttons</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">#homepage</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> $white<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.home-separator</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background-color</span><span class="token punctuation">:</span> $orange-2<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.clickable</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token selector">&amp;:not(:last-child)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Hyperlink with router 2/5 - route definition</h2>
<p>The uuid provided previously is passed to render the component <a href="./js/src/views/Event/Event.vue"><code>views/Event/Event.vue</code></a></p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/router/event.ts">js/src/router/event.ts</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-ts"><code class="language-ts"><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteConfig<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ImportedComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue/types/options"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> participations <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">  <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token comment">/* webpackChunkName: "participations" */</span> <span class="token string">"@/views/Event/Participants.vue"</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> editEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "edit-event" */</span> <span class="token string">"@/views/Event/Edit.vue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "event" */</span> <span class="token string">"@/views/Event/Event.vue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> myEvents <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "my-events" */</span> <span class="token string">"@/views/Event/MyEvents.vue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">enum</span> EventRouteName <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_LIST</span> <span class="token operator">=</span> <span class="token string">"EventList"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">CREATE_EVENT</span> <span class="token operator">=</span> <span class="token string">"CreateEvent"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">MY_EVENTS</span> <span class="token operator">=</span> <span class="token string">"MyEvents"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EDIT_EVENT</span> <span class="token operator">=</span> <span class="token string">"EditEvent"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">DUPLICATE_EVENT</span> <span class="token operator">=</span> <span class="token string">"DuplicateEvent"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">PARTICIPATIONS</span> <span class="token operator">=</span> <span class="token string">"Participations"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT</span> <span class="token operator">=</span> <span class="token string">"Event"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PARTICIPATE_WITH_ACCOUNT</span> <span class="token operator">=</span> <span class="token string">"EVENT_PARTICIPATE_WITH_ACCOUNT"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PARTICIPATE_WITHOUT_ACCOUNT</span> <span class="token operator">=</span> <span class="token string">"EVENT_PARTICIPATE_WITHOUT_ACCOUNT"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PARTICIPATE_LOGGED_OUT</span> <span class="token operator">=</span> <span class="token string">"EVENT_PARTICIPATE_LOGGED_OUT"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PARTICIPATE_CONFIRM</span> <span class="token operator">=</span> <span class="token string">"EVENT_PARTICIPATE_CONFIRM"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">TAG</span> <span class="token operator">=</span> <span class="token string">"Tag"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">const</span> eventRoutes<span class="token operator">:</span> RouteConfig<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/list/:location?"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT_LIST</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "EventList" */</span> <span class="token string">"@/views/Event/EventList.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/create"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">CREATE_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> editEvent<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/me"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">MY_EVENTS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> myEvents<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/edit/:eventId"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EDIT_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> editEvent<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token punctuation">(</span>route<span class="token operator">:</span> Route<span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>route<span class="token punctuation">.</span>params<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">{</span> isUpdate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/duplicate/:eventId"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">DUPLICATE_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> editEvent<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token punctuation">(</span>route<span class="token operator">:</span> Route<span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token operator">...</span>route<span class="token punctuation">.</span>params<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token operator">...</span><span class="token punctuation">{</span> isDuplicate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/:eventId/participations"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">PARTICIPATIONS</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> participations<span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    path<span class="token operator">:</span> <span class="token string">"/events/:uuid"</span><span class="token punctuation">,</span></mark><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> event<span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/:uuid/participate"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT_PARTICIPATE_LOGGED_OUT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../components/Participation/UnloggedParticipation.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/:uuid/participate/with-account"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT_PARTICIPATE_WITH_ACCOUNT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../components/Participation/ParticipationWithAccount.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/events/:uuid/participate/without-account"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT_PARTICIPATE_WITHOUT_ACCOUNT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../components/Participation/ParticipationWithoutAccount.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/participation/email/confirm/:token"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">EVENT_PARTICIPATE_CONFIRM</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../components/Participation/ConfirmParticipation.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    path<span class="token operator">:</span> <span class="token string">"/tag/:tag"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token operator">:</span> EventRouteName<span class="token punctuation">.</span><span class="token constant">TAG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ImportedComponent<span class="token operator">></span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "Search" */</span> <span class="token string">"@/views/Search.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiredAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Hyperlink with router 3/5 - component prop from router</h2>
<p>Here, we can see that the event's uuid from the router is present as a <code>@Prop</code> for the component.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Event/Event.vue">js/src/views/Event/Event.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.queries.event.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-banner</span> <span class="token attr-name">:picture</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.picture<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>intro-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-calendar-icon-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>date-calendar-icon</span> <span class="token attr-name">:date</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.beginsOn<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>intro<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>{{ event.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>organizer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor &amp;&amp; !event.attributedTo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                    <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $t("By @{username}", {</span><br><span class="highlight-line">                          username: usernameWithDomain(event.organizerActor),</span><br><span class="highlight-line">                        })</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><br>                  <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                    event.attributedTo &amp;&amp;</span><br><span class="highlight-line">                    event.options.hideOrganizerWhenGroupEvent</span><br>                  <span class="token punctuation">"</span></span><br>                <span class="token punctuation">></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                    <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.attributedTo<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{</span><br><span class="highlight-line">                      $t("By @{group}", {</span><br><span class="highlight-line">                        group: usernameWithDomain(event.attributedTo),</span><br><span class="highlight-line">                      })</span><br><span class="highlight-line">                    }}</span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor &amp;&amp; event.attributedTo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>By {group}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                      <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.attributedTo<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>group<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                      <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                    <span class="token punctuation">></span></span><br>                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                        <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                          name: RouteName.GROUP,</span><br><span class="highlight-line">                          params: {</span><br><span class="highlight-line">                            preferredUsername: usernameWithDomain(</span><br><span class="highlight-line">                              event.attributedTo</span><br><span class="highlight-line">                            ),</span><br><span class="highlight-line">                          },</span><br>                        }<span class="token punctuation">"</span></span><br>                      <span class="token punctuation">></span></span><br><span class="highlight-line">                        {{</span><br><span class="highlight-line">                          $t("@{group}", {</span><br><span class="highlight-line">                            group: usernameWithDomain(event.attributedTo),</span><br><span class="highlight-line">                          })</span><br><span class="highlight-line">                        }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.tags &amp;&amp; event.tags.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">                  <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag in event.tags<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag.title<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.TAG, params: { tag: tag.title } }<span class="token punctuation">"</span></span></span><br>                <span class="token punctuation">></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>{{ tag.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-medium<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.draft<span class="token punctuation">"</span></span><br>                <span class="token punctuation">></span></span>{{ $t("Draft") }}<br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-status<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status !== EventStatus.CONFIRMED<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status === EventStatus.TENTATIVE<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token punctuation">></span></span>{{ $t("Event to be confirmed") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span></span><br>                <span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status === EventStatus.CANCELLED<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token punctuation">></span></span>{{ $t("Event cancelled") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span></span><br>                <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-3-tablet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>participation-section</span><br><span class="highlight-line">                <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participations[0]<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">:anonymousParticipation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymousParticipation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinEvent<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-modal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive = true<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-event-with-confirmation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinEventWithConfirmation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@confirm-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirmLeave<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@cancel-anonymous-participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelAnonymousParticipation<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">/></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>has-text-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visibility<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.visibility === EventVisibility.PUBLIC<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    {{ $t("Public event") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>earth<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.visibility === EventVisibility.UNLISTED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    {{ $t("Private event") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.local &amp;&amp; organizer.domain<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>{{ organizer.domain }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participations-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent &amp;&amp; event.draft === false<span class="token punctuation">"</span></span></span><br>                    <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                      name: RouteName.PARTICIPATIONS,</span><br><span class="highlight-line">                      params: { eventId: event.uuid },</span><br>                    }<span class="token punctuation">"</span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token comment">&lt;!-- We retire one because of the event creator who is a participant --></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.options.maximumAttendeeCapacity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "{available}/{capacity} available places",</span><br><span class="highlight-line">                          event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                            event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            available:</span><br><span class="highlight-line">                              event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                              event.participantStats.participant,</span><br><span class="highlight-line">                            capacity: event.options.maximumAttendeeCapacity,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "No one is participating|One person participating|{going} people participating",</span><br><span class="highlight-line">                          event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            going: event.participantStats.participant,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.options.maximumAttendeeCapacity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "{available}/{capacity} available places",</span><br><span class="highlight-line">                          event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                            event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            available:</span><br><span class="highlight-line">                              event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                              event.participantStats.participant,</span><br><span class="highlight-line">                            capacity: event.options.maximumAttendeeCapacity,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "No one is participating|One person participating|{going} people participating",</span><br><span class="highlight-line">                          event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            going: event.participantStats.participant,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tooltip</span><br><span class="highlight-line">                    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-dark<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.local<span class="token punctuation">"</span></span></span><br>                    <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                      $t(</span><br><span class="highlight-line">                        <span class="token punctuation">'</span>The actual number of participants may differ, as this event is hosted on another instance.<span class="token punctuation">'</span></span><br><span class="highlight-line">                      )</span><br>                    <span class="token punctuation">"</span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>help-circle-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tooltip</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ticket-confirmation-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown</span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-bottom-left<span class="token punctuation">"</span></span> <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">                    <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trigger<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">icon-right</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dots-horizontal<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{ $t("Actions") }}</span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">has-link</span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                      <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                        name: RouteName.EDIT_EVENT,</span><br><span class="highlight-line">                        params: { eventId: event.uuid },</span><br>                      }<span class="token punctuation">"</span></span><br>                    <span class="token punctuation">></span></span><br><span class="highlight-line">                      {{ $t("Edit") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">has-link</span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                      <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                        name: RouteName.DUPLICATE_EVENT,</span><br><span class="highlight-line">                        params: { eventId: event.uuid },</span><br>                      }<span class="token punctuation">"</span></span><br>                    <span class="token punctuation">></span></span><br><span class="highlight-line">                      {{ $t("Duplicate") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-duplicate<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openDeleteEventModalWrapper<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{ $t("Delete") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-divider<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menuitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">/></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>triggerShare()<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Share this event") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>share<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downloadIcsEvent()<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Add to my calendar") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>calendar-plus<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ableToReport<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isReportModalActive = true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Report") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-metadata<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sticky<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-metadata-sidebar</span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event &amp;&amp; config<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description-comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>subtitle</span><span class="token punctuation">></span></span>{{ $t("About this event") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>subtitle</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{ $t("The event organizer didn't add any description.") }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description-content<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDescriptionElement<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.description<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">/></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration-wrappers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(metadata, integration) in integrations<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:metadata</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>metadata<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commentsObserver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>subtitle</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Comments") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>subtitle</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment-tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loadComments<span class="token punctuation">"</span></span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>more-events section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.relatedEvents.length > 0<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title has-text-centered<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("These events may interest you") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent in event.relatedEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isReportModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reportModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>report-modal</span><br><span class="highlight-line">          <span class="token attr-name">:on-confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reportEvent<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Report this event<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">:outside-domain</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>organizerDomain<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$refs.reportModal.close()<span class="token punctuation">"</span></span></span><br>        <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShareModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shareModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>share-event-modal</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token attr-name">:eventCapacityOK</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventCapacityOK<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participationModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-picker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>identity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-foot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelButton<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive = false<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">></span></span><br><span class="highlight-line">                {{ $t("Cancel") }}</span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirmButton<span class="token punctuation">"</span></span></span><br>                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                  event.joinOptions === EventJoinOptions.RESTRICTED</span><br><span class="highlight-line">                    ? joinEventWithConfirmation(identity)</span><br><span class="highlight-line">                    : joinEvent(identity)</span><br>                <span class="token punctuation">"</span></span><br>              <span class="token punctuation">></span></span><br><span class="highlight-line">                {{ $t("Confirm my particpation") }}</span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-picker</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinConfirmationModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinConfirmationModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-head<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{ $t("Participation confirmation") }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  "The event organiser has chosen to validate manually participations. Do you want to add a little note to explain why you want to participate to this event?"</span><br><span class="highlight-line">                )</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><br>              <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                joinEvent(actorForConfirmation, messageForConfirmation)</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Message<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-medium<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>messageForConfirmation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span></span><br>                <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">                  <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelButton<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinConfirmationModalActive = false<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span>{{ $t("Cancel") }}<br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span> <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  {{ $t("Confirm my participation") }}</span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> BIcon <span class="token keyword">from</span> <span class="token string">"buefy/src/components/icon/Icon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  EventJoinOptions<span class="token punctuation">,</span></span><br><span class="highlight-line">  EventStatus<span class="token punctuation">,</span></span><br><span class="highlight-line">  EventVisibility<span class="token punctuation">,</span></span><br><span class="highlight-line">  MemberRole<span class="token punctuation">,</span></span><br><span class="highlight-line">  ParticipantRole<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PERSON_PARTICIPATION_SUBSCRIPTION_CHANGED</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">JOIN_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">PERSON_MEMBERSHIP_GROUP</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventModel<span class="token punctuation">,</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IActor<span class="token punctuation">,</span> IPerson<span class="token punctuation">,</span> Person<span class="token punctuation">,</span> usernameWithDomain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">GRAPHQL_API_ENDPOINT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../api/_entrypoint"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateCalendarIcon <span class="token keyword">from</span> <span class="token string">"../../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> ReportModal <span class="token keyword">from</span> <span class="token string">"../../components/Report/ReportModal.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IReport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/report.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CREATE_REPORT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/report"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventMixin <span class="token keyword">from</span> <span class="token string">"../../mixins/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> IdentityPicker <span class="token keyword">from</span> <span class="token string">"../Account/IdentityPicker.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> ParticipationSection <span class="token keyword">from</span> <span class="token string">"../../components/Participation/ParticipationSection.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> CommentTree <span class="token keyword">from</span> <span class="token string">"../../components/Comment/CommentTree.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"intersection-observer"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  AnonymousParticipationNotFoundError<span class="token punctuation">,</span></span><br><span class="highlight-line">  getLeaveTokenForParticipation<span class="token punctuation">,</span></span><br><span class="highlight-line">  isParticipatingInThisEvent<span class="token punctuation">,</span></span><br><span class="highlight-line">  removeAnonymousParticipation<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../services/AnonymousParticipationStorage"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Tag <span class="token keyword">from</span> <span class="token string">"../../components/Tag.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventMetadataSidebar <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventMetadataSidebar.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventBanner <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventBanner.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> PopoverActorCard <span class="token keyword">from</span> <span class="token string">"../../components/Account/PopoverActorCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloCache<span class="token punctuation">,</span> FetchResult <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@apollo/client/core"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEventMetadataDescription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/event-metadata"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> eventMetaDataList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../services/EventMetadata"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// noinspection TypeScriptValidateTypes</span></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    BIcon<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateCalendarIcon<span class="token punctuation">,</span></span><br><span class="highlight-line">    ReportModal<span class="token punctuation">,</span></span><br><span class="highlight-line">    IdentityPicker<span class="token punctuation">,</span></span><br><span class="highlight-line">    ParticipationSection<span class="token punctuation">,</span></span><br><span class="highlight-line">    CommentTree<span class="token punctuation">,</span></span><br><span class="highlight-line">    Tag<span class="token punctuation">,</span></span><br><span class="highlight-line">    PopoverActorCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventBanner<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventMetadataSidebar<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function-variable function">ShareEventModal</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "shareEventModal" */</span> <span class="token string">"../../components/Event/ShareEventModal.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-twitch"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "twitchIntegration" */</span> <span class="token string">"../../components/Event/Integrations/Twitch.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-peertube"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "PeerTubeIntegration" */</span> <span class="token string">"../../components/Event/Integrations/PeerTube.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-youtube"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "YouTubeIntegration" */</span> <span class="token string">"../../components/Event/Integrations/YouTube.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-jitsi-meet"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "JitsiMeetIntegration" */</span> <span class="token string">"../../components/Event/Integrations/JitsiMeet.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-etherpad"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "EtherpadIntegration" */</span> <span class="token string">"../../components/Event/Integrations/Etherpad.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    event<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> graphQLErrors <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleErrors</span><span class="token punctuation">(</span>graphQLErrors<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    participations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          actorId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      subscribeToMore<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        document<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION_SUBSCRIPTION_CHANGED</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">            actorId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>person<span class="token punctuation">)</span> <span class="token keyword">return</span> data<span class="token punctuation">.</span>person<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    person<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">PERSON_MEMBERSHIP_GROUP</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          group<span class="token operator">:</span> <span class="token function">usernameWithDomain</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo<span class="token operator">?.</span>preferredUsername</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventTitle<span class="token punctuation">,</span></span><br><span class="highlight-line">      meta<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">        <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"description"</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventDescription <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token keyword">extends</span> <span class="token class-name">EventMixin</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> uuid<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active"></mark><br><span class="highlight-line">  event<span class="token operator">:</span> IEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  identity<span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  person<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  participations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  oldParticipationRole<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isReportModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isShareModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isJoinModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventVisibility <span class="token operator">=</span> EventVisibility<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventStatus <span class="token operator">=</span> EventStatus<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventJoinOptions <span class="token operator">=</span> EventJoinOptions<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  usernameWithDomain <span class="token operator">=</span> usernameWithDomain<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  observer<span class="token operator">!</span><span class="token operator">:</span> IntersectionObserver<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loadComments <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  anonymousParticipation<span class="token operator">:</span> boolean <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  actorForConfirmation<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  messageForConfirmation <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> string <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> string <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>description<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>identity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"#comment-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>isSecureContext<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span></span><br><span class="highlight-line">          <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anonymousParticipationConfirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">AnonymousParticipationNotFoundError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line no-restricted-syntax</span></span><br><span class="highlight-line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments <span class="token operator">=</span> entry<span class="token punctuation">.</span>isIntersecting <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        rootMargin<span class="token operator">:</span> <span class="token string">"-50px 0px -50px"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commentsObserver <span class="token keyword">as</span> Element<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">"eventDescription"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">eventDescription</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventDescription<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> eventDescriptionElement <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs</span><br><span class="highlight-line">        <span class="token punctuation">.</span>eventDescriptionElement <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      eventDescriptionElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">$event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token comment">// TODO: Find the right type for target</span></span><br><span class="highlight-line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> target <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> any <span class="token punctuation">}</span> <span class="token operator">=</span> $event<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">while</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>tagName <span class="token operator">!==</span> <span class="token string">"A"</span><span class="token punctuation">)</span> target <span class="token operator">=</span> target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token comment">// handle only links that occur inside the component and do not reference external resources</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">".hashtag"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token comment">// some sanity checks taken from vue-router:</span></span><br><span class="highlight-line">          <span class="token comment">// https://github.com/vuejs/vue-router/blob/dev/src/components/link.js#L106</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            altKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            ctrlKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            metaKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            shiftKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            button<span class="token punctuation">,</span></span><br><span class="highlight-line">            defaultPrevented<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span> <span class="token operator">=</span> $event<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle with control keys</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>metaKey <span class="token operator">||</span> altKey <span class="token operator">||</span> ctrlKey <span class="token operator">||</span> shiftKey<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle when preventDefault called</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultPrevented<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle right clicks</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>button <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> button <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle if `target="_blank"`</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>getAttribute<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">const</span> linkTarget <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b_blank\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>linkTarget<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle same page links/anchors</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> to <span class="token operator">=</span> url<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> to <span class="token operator">&amp;&amp;</span> $event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            $event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"event-deleted"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">HOME</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br>  <span class="token comment">/**<br><span class="highlight-line">   * Delete the event, then redirect to home.</span><br>   */</span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">openDeleteEventModalWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">openDeleteEventModal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">reportEvent</span><span class="token punctuation">(</span>content<span class="token operator">:</span> string<span class="token punctuation">,</span> forward<span class="token operator">:</span> boolean<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isReportModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>reportModal<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> eventTitle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span>mutate<span class="token operator">&lt;</span>IReport<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        mutation<span class="token operator">:</span> <span class="token constant">CREATE_REPORT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          reportedId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">.</span>id <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          content<span class="token punctuation">,</span></span><br><span class="highlight-line">          forward<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Event {eventTitle} reported"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eventTitle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">joinEventWithConfirmation</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> IPerson<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>actorForConfirmation <span class="token operator">=</span> actor<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">joinEvent</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    identity<span class="token operator">:</span> IPerson<span class="token punctuation">,</span></span><br><span class="highlight-line">    message<span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> mutationData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span>mutate<span class="token operator">&lt;</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        joinEvent<span class="token operator">:</span> IParticipant<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        mutation<span class="token operator">:</span> <span class="token constant">JOIN_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          message<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span></span><br>          <span class="token parameter">store<span class="token operator">:</span> ApolloCache<span class="token operator">&lt;</span><span class="token punctuation">{</span><br><span class="highlight-line">            joinEvent<span class="token operator">:</span> IParticipant<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">,</span></span><br>          <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token operator">:</span> FetchResult</span><br><span class="highlight-line">        <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">const</span> participationCachedData <span class="token operator">=</span> store<span class="token punctuation">.</span>readQuery<span class="token operator">&lt;</span><span class="token punctuation">{</span> person<span class="token operator">:</span> IPerson <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span> actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>participationCachedData<span class="token operator">?.</span>person <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">              <span class="token string">"Cannot update participation cache, because of null value."</span></span><br><span class="highlight-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          store<span class="token punctuation">.</span><span class="token function">writeQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span> actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            data<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">              person<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                <span class="token operator">...</span>participationCachedData<span class="token operator">?.</span>person<span class="token punctuation">,</span></span><br><span class="highlight-line">                participations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                  elements<span class="token operator">:</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>joinEvent<span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">                  total<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">              <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">const</span> cachedData <span class="token operator">=</span> store<span class="token punctuation">.</span>readQuery<span class="token operator">&lt;</span><span class="token punctuation">{</span> event<span class="token operator">:</span> IEvent <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedData <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> event <span class="token punctuation">}</span> <span class="token operator">=</span> cachedData<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">              <span class="token string">"Cannot update event participant cache, because of null value."</span></span><br><span class="highlight-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> participantStats <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>event<span class="token punctuation">.</span>participantStats <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>joinEvent<span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>notApproved <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>going <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>participant <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          store<span class="token punctuation">.</span><span class="token function">writeQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uuid <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            data<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">              event<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                <span class="token operator">...</span>event<span class="token punctuation">,</span></span><br><span class="highlight-line">                participantStats<span class="token punctuation">,</span></span><br><span class="highlight-line">              <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>mutationData<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>mutationData<span class="token punctuation">.</span>joinEvent<span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationRequestedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">confirmLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$buefy<span class="token punctuation">.</span>dialog<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'Leaving event "{title}"'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      message<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token string">'Are you sure you want to cancel your participation at event "{title}"?'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">          title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      confirmText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Leave event"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      cancelText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Cancel"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      type<span class="token operator">:</span> <span class="token string">"is-danger"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      hasIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">leaveEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"participations"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">watchParticipations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">case</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">PARTICIPANT</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">case</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationRejectedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">default</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationChangedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been confirmed"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationRequestedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been requested"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationRejectedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been rejected"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationChangedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation status has been changed"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">downloadIcsEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">GRAPHQL_API_ENDPOINT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/events/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/export/ics</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"text/calendar"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.ics</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">triggerShare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore-start</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>share<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      navigator</span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">        <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">          title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">          url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>url<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Successful share"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Error sharing"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>isShareModalActive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token comment">// send popup</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore-end</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">handleErrors</span><span class="token punctuation">(</span>errors<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      errors<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> error<span class="token punctuation">.</span>status_code <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token operator">||</span></span><br><span class="highlight-line">      errors<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> message <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"has invalid value $uuid"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">PAGE_NOT_FOUND</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">actorIsParticipant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>actorIsOrganizer<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">PARTICIPANT</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">actorIsOrganizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">CREATOR</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">hasGroupPrivileges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token operator">?.</span>memberships<span class="token operator">?.</span>total <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token punctuation">[</span>MemberRole<span class="token punctuation">.</span><span class="token constant">MODERATOR</span><span class="token punctuation">,</span> MemberRole<span class="token punctuation">.</span><span class="token constant">ADMINISTRATOR</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token operator">?.</span>memberships<span class="token operator">?.</span>elements<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role</span><br><span class="highlight-line">      <span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canManageEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>actorIsOrganizer <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasGroupPrivileges<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">endDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Date <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn</span><br><span class="highlight-line">      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn</span><br><span class="highlight-line">      <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventCapacityOK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>draft<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity <span class="token operator">></span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>participantStats<span class="token punctuation">.</span>participant</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">numberOfPlacesStillAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>draft<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity <span class="token operator">-</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>participantStats<span class="token punctuation">.</span>participant</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">anonymousParticipationConfirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token function">isParticipatingInThisEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">cancelAnonymousParticipation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getLeaveTokenForParticipation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">leaveEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>anonymous<span class="token punctuation">.</span>actorId<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token function">removeAnonymousParticipation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">ableToReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>anonymous<span class="token punctuation">.</span>reports<span class="token punctuation">.</span>allowed<span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">organizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IActor <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>organizerActor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>organizerActor<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">organizerDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">.</span>domain<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  metadataToComponent<span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:twitch:url"</span><span class="token operator">:</span> <span class="token string">"integration-twitch"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:peertube:url"</span><span class="token operator">:</span> <span class="token string">"integration-peertube"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:youtube:url"</span><span class="token operator">:</span> <span class="token string">"integration-youtube"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:visio:jitsi_meet"</span><span class="token operator">:</span> <span class="token string">"integration-jitsi-meet"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:notes:etherpad:url"</span><span class="token operator">:</span> <span class="token string">"integration-etherpad"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">integrations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IEventMetadataDescription<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>metadata</span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> def <span class="token operator">=</span> eventMetaDataList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dat</span><span class="token punctuation">)</span> <span class="token operator">=></span> dat<span class="token punctuation">.</span>key <span class="token operator">===</span> val<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token operator">...</span>def<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token operator">...</span>val<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IEventMetadataDescription<span class="token operator">></span><span class="token punctuation">,</span> metadata</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadataToComponent<span class="token punctuation">[</span>metadata<span class="token punctuation">.</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">          <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">          acc<span class="token punctuation">[</span>component<span class="token punctuation">]</span> <span class="token operator">=</span> metadata<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token selector">.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 2rem 4rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.fade-enter-active,<br>.fade-leave-active</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.fade-enter,<br>.fade-leave-to</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">div.sidebar</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> #b3b3b2<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 60px<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">div.organizer</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">color</span><span class="token punctuation">:</span> #4a4a4a<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      <span class="token selector">span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">line-height</span><span class="token punctuation">:</span> 2.7rem<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">padding-right</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.intro</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.is-3-tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">p.tags</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token selector">&amp;.tag</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">margin</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.event-description-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br>  <span class="token selector">&amp; > aside,<br>  &amp; > div</span> <span class="token punctuation">{</span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 2rem auto<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">aside.event-metadata</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">min-width</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">padding-left</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.sticky</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">div.event-description-comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">min-width</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">flex</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.description-content</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token selector">::v-deep h1</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep h2</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep ul</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep li</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto 10px 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep blockquote</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">border-left</span><span class="token punctuation">:</span> 0.2em solid #333<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">padding-left</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep p</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">padding</span><span class="token punctuation">:</span> 0.3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">background</span><span class="token punctuation">:</span> $secondary<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">color</span><span class="token punctuation">:</span> #111<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token selector">&amp;:empty</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding-top</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a h3#comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.more-events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1rem 4rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.dropdown .dropdown-trigger span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">a.dropdown-item,<br><span class="highlight-line">.dropdown .dropdown-menu .has-link a,</span><br>button.dropdown-item</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding-right</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">a.participations-link</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.event-status .tag</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.no-border</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.wrapper,<br>.intro-wrapper</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.intro-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px 16px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.date-calendar-icon-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">align-self</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 0rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Hyperlink with router 4/5 - variable in GraphQL</h2>
<p>The GraphQL query can then rely on the prop <code>uuid</code> from the component.
This way GraphQL can use it as <code>$uuid</code> named variable.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/views/Event/Event.vue">js/src/views/Event/Event.vue</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-loading</span> <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$apollo.queries.event.loading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-banner</span> <span class="token attr-name">:picture</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.picture<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>intro-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date-calendar-icon-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>date-calendar-icon</span> <span class="token attr-name">:date</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.beginsOn<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>intro<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>{{ event.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>organizer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor &amp;&amp; !event.attributedTo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                    <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $t("By @{username}", {</span><br><span class="highlight-line">                          username: usernameWithDomain(event.organizerActor),</span><br><span class="highlight-line">                        })</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><br>                  <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                    event.attributedTo &amp;&amp;</span><br><span class="highlight-line">                    event.options.hideOrganizerWhenGroupEvent</span><br>                  <span class="token punctuation">"</span></span><br>                <span class="token punctuation">></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                    <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.attributedTo<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{</span><br><span class="highlight-line">                      $t("By @{group}", {</span><br><span class="highlight-line">                        group: usernameWithDomain(event.attributedTo),</span><br><span class="highlight-line">                      })</span><br><span class="highlight-line">                    }}</span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.organizerActor &amp;&amp; event.attributedTo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>By {group}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>popover-actor-card</span><br><span class="highlight-line">                      <span class="token attr-name">:actor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.attributedTo<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>group<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                      <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span></span><br>                    <span class="token punctuation">></span></span><br>                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                        <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                          name: RouteName.GROUP,</span><br><span class="highlight-line">                          params: {</span><br><span class="highlight-line">                            preferredUsername: usernameWithDomain(</span><br><span class="highlight-line">                              event.attributedTo</span><br><span class="highlight-line">                            ),</span><br><span class="highlight-line">                          },</span><br>                        }<span class="token punctuation">"</span></span><br>                      <span class="token punctuation">></span></span><br><span class="highlight-line">                        {{</span><br><span class="highlight-line">                          $t("@{group}", {</span><br><span class="highlight-line">                            group: usernameWithDomain(event.attributedTo),</span><br><span class="highlight-line">                          })</span><br><span class="highlight-line">                        }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>popover-actor-card</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.tags &amp;&amp; event.tags.length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">                  <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag in event.tags<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag.title<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: RouteName.TAG, params: { tag: tag.title } }<span class="token punctuation">"</span></span></span><br>                <span class="token punctuation">></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>{{ tag.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-medium<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.draft<span class="token punctuation">"</span></span><br>                <span class="token punctuation">></span></span>{{ $t("Draft") }}<br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-status<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status !== EventStatus.CONFIRMED<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status === EventStatus.TENTATIVE<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token punctuation">></span></span>{{ $t("Event to be confirmed") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span></span><br>                <span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tag</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-danger<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.status === EventStatus.CANCELLED<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token punctuation">></span></span>{{ $t("Event cancelled") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tag</span></span><br>                <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-3-tablet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>participation-section</span><br><span class="highlight-line">                <span class="token attr-name">:participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participations[0]<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">:anonymousParticipation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymousParticipation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinEvent<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-modal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive = true<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@join-event-with-confirmation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinEventWithConfirmation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@confirm-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirmLeave<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@cancel-anonymous-participation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelAnonymousParticipation<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">/></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>has-text-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visibility<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.visibility === EventVisibility.PUBLIC<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    {{ $t("Public event") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>earth<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.visibility === EventVisibility.UNLISTED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    {{ $t("Private event") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.local &amp;&amp; organizer.domain<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>{{ organizer.domain }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br><span class="highlight-line">                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participations-link<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent &amp;&amp; event.draft === false<span class="token punctuation">"</span></span></span><br>                    <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                      name: RouteName.PARTICIPATIONS,</span><br><span class="highlight-line">                      params: { eventId: event.uuid },</span><br>                    }<span class="token punctuation">"</span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token comment">&lt;!-- We retire one because of the event creator who is a participant --></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.options.maximumAttendeeCapacity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "{available}/{capacity} available places",</span><br><span class="highlight-line">                          event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                            event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            available:</span><br><span class="highlight-line">                              event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                              event.participantStats.participant,</span><br><span class="highlight-line">                            capacity: event.options.maximumAttendeeCapacity,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "No one is participating|One person participating|{going} people participating",</span><br><span class="highlight-line">                          event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            going: event.participantStats.participant,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.options.maximumAttendeeCapacity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "{available}/{capacity} available places",</span><br><span class="highlight-line">                          event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                            event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            available:</span><br><span class="highlight-line">                              event.options.maximumAttendeeCapacity -</span><br><span class="highlight-line">                              event.participantStats.participant,</span><br><span class="highlight-line">                            capacity: event.options.maximumAttendeeCapacity,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{</span><br><span class="highlight-line">                        $tc(</span><br><span class="highlight-line">                          "No one is participating|One person participating|{going} people participating",</span><br><span class="highlight-line">                          event.participantStats.participant,</span><br><span class="highlight-line">                          {</span><br><span class="highlight-line">                            going: event.participantStats.participant,</span><br><span class="highlight-line">                          }</span><br><span class="highlight-line">                        )</span><br><span class="highlight-line">                      }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-tooltip</span><br><span class="highlight-line">                    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-dark<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.local<span class="token punctuation">"</span></span></span><br>                    <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                      $t(</span><br><span class="highlight-line">                        <span class="token punctuation">'</span>The actual number of participants may differ, as this event is hosted on another instance.<span class="token punctuation">'</span></span><br><span class="highlight-line">                      )</span><br>                    <span class="token punctuation">"</span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-small<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>help-circle-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-tooltip</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ticket-confirmation-outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown</span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-bottom-left<span class="token punctuation">"</span></span> <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">                    <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trigger<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">icon-right</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dots-horizontal<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{ $t("Actions") }}</span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">has-link</span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                      <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                        name: RouteName.EDIT_EVENT,</span><br><span class="highlight-line">                        params: { eventId: event.uuid },</span><br>                      }<span class="token punctuation">"</span></span><br>                    <span class="token punctuation">></span></span><br><span class="highlight-line">                      {{ $t("Edit") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pencil<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">has-link</span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><br>                      <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<br><span class="highlight-line">                        name: RouteName.DUPLICATE_EVENT,</span><br><span class="highlight-line">                        params: { eventId: event.uuid },</span><br>                      }<span class="token punctuation">"</span></span><br>                    <span class="token punctuation">></span></span><br><span class="highlight-line">                      {{ $t("Duplicate") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-duplicate<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openDeleteEventModalWrapper<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    {{ $t("Delete") }}</span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><br><span class="highlight-line">                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-divider<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menuitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canManageEvent || event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">/></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>triggerShare()<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Share this event") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>share<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downloadIcsEvent()<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.draft<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Add to my calendar") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>calendar-plus<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-dropdown-item</span><br><span class="highlight-line">                    <span class="token attr-name">aria-role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>listitem<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ableToReport<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isReportModalActive = true<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                      {{ $t("Report") }}</span><br><span class="highlight-line">                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown-item</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-dropdown</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-metadata<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sticky<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>event-metadata-sidebar</span><br><span class="highlight-line">              <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event &amp;&amp; config<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description-comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event-description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>subtitle</span><span class="token punctuation">></span></span>{{ $t("About this event") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>subtitle</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!event.description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{ $t("The event organizer didn't add any description.") }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description-content<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventDescriptionElement<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.description<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">/></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration-wrappers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><br><span class="highlight-line">              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(metadata, integration) in integrations<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integration<span class="token punctuation">"</span></span></span><br><span class="highlight-line">              <span class="token attr-name">:metadata</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>metadata<span class="token punctuation">"</span></span></span><br>            <span class="token punctuation">/></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commentsObserver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>subtitle</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ $t("Comments") }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>subtitle</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment-tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loadComments<span class="token punctuation">"</span></span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><br><span class="highlight-line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>more-events section<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event.relatedEvents.length > 0<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title has-text-centered<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          {{ $t("These events may interest you") }}</span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><br><span class="highlight-line">            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column is-one-third-desktop<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent in event.relatedEvents<span class="token punctuation">"</span></span></span><br><span class="highlight-line">            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent.uuid<span class="token punctuation">"</span></span></span><br>          <span class="token punctuation">></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EventCard</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>relatedEvent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isReportModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reportModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>report-modal</span><br><span class="highlight-line">          <span class="token attr-name">:on-confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reportEvent<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Report this event<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">:outside-domain</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>organizerDomain<span class="token punctuation">"</span></span></span><br><span class="highlight-line">          <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$refs.reportModal.close()<span class="token punctuation">"</span></span></span><br>        <span class="token punctuation">/></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShareModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shareModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>share-event-modal</span> <span class="token attr-name">:event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>event<span class="token punctuation">"</span></span> <span class="token attr-name">:eventCapacityOK</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eventCapacityOK<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>participationModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identity-picker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>identity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-foot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelButton<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinModalActive = false<span class="token punctuation">"</span></span></span><br>              <span class="token punctuation">></span></span><br><span class="highlight-line">                {{ $t("Cancel") }}</span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br><span class="highlight-line">                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button is-primary<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirmButton<span class="token punctuation">"</span></span></span><br>                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                  event.joinOptions === EventJoinOptions.RESTRICTED</span><br><span class="highlight-line">                    ? joinEventWithConfirmation(identity)</span><br><span class="highlight-line">                    : joinEvent(identity)</span><br>                <span class="token punctuation">"</span></span><br>              <span class="token punctuation">></span></span><br><span class="highlight-line">                {{ $t("Confirm my particpation") }}</span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identity-picker</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-modal</span><br><span class="highlight-line">        <span class="token attr-name">:active.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinConfirmationModalActive<span class="token punctuation">"</span></span></span><br><span class="highlight-line">        <span class="token attr-name">has-modal-card</span></span><br><span class="highlight-line">        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>joinConfirmationModal<span class="token punctuation">"</span></span></span><br>      <span class="token punctuation">></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-head<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{ $t("Participation confirmation") }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-card-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              {{</span><br><span class="highlight-line">                $t(</span><br><span class="highlight-line">                  "The event organiser has chosen to validate manually participations. Do you want to add a little note to explain why you want to participate to this event?"</span><br><span class="highlight-line">                )</span><br><span class="highlight-line">              }}</span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><br>              <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br><span class="highlight-line">                joinEvent(actorForConfirmation, messageForConfirmation)</span><br>              <span class="token punctuation">"</span></span><br>            <span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>Message<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span><br><span class="highlight-line">                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-medium<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>messageForConfirmation<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span></span><br>                <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span><br><span class="highlight-line">                  <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancelButton<span class="token punctuation">"</span></span></span><br><span class="highlight-line">                  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isJoinConfirmationModalActive = false<span class="token punctuation">"</span></span></span><br>                  <span class="token punctuation">></span></span>{{ $t("Cancel") }}<br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-primary<span class="token punctuation">"</span></span> <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">                  {{ $t("Confirm my participation") }}</span><br><span class="highlight-line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-button</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-modal</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> BIcon <span class="token keyword">from</span> <span class="token string">"buefy/src/components/icon/Icon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  EventJoinOptions<span class="token punctuation">,</span></span><br><span class="highlight-line">  EventStatus<span class="token punctuation">,</span></span><br><span class="highlight-line">  EventVisibility<span class="token punctuation">,</span></span><br><span class="highlight-line">  MemberRole<span class="token punctuation">,</span></span><br><span class="highlight-line">  ParticipantRole<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/enums"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">EVENT_PERSON_PARTICIPATION_SUBSCRIPTION_CHANGED</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">JOIN_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token constant">PERSON_MEMBERSHIP_GROUP</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EventModel<span class="token punctuation">,</span> IEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/event.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IActor<span class="token punctuation">,</span> IPerson<span class="token punctuation">,</span> Person<span class="token punctuation">,</span> usernameWithDomain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/actor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">GRAPHQL_API_ENDPOINT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../api/_entrypoint"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> DateCalendarIcon <span class="token keyword">from</span> <span class="token string">"../../components/Event/DateCalendarIcon.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventCard <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> ReportModal <span class="token keyword">from</span> <span class="token string">"../../components/Report/ReportModal.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IReport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/report.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CREATE_REPORT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/report"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventMixin <span class="token keyword">from</span> <span class="token string">"../../mixins/event"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> IdentityPicker <span class="token keyword">from</span> <span class="token string">"../Account/IdentityPicker.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> ParticipationSection <span class="token keyword">from</span> <span class="token string">"../../components/Participation/ParticipationSection.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> RouteName <span class="token keyword">from</span> <span class="token string">"../../router/name"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> CommentTree <span class="token keyword">from</span> <span class="token string">"../../components/Comment/CommentTree.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"intersection-observer"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONFIG</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../graphql/config"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  AnonymousParticipationNotFoundError<span class="token punctuation">,</span></span><br><span class="highlight-line">  getLeaveTokenForParticipation<span class="token punctuation">,</span></span><br><span class="highlight-line">  isParticipatingInThisEvent<span class="token punctuation">,</span></span><br><span class="highlight-line">  removeAnonymousParticipation<span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../services/AnonymousParticipationStorage"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/config.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Subtitle <span class="token keyword">from</span> <span class="token string">"../../components/Utils/Subtitle.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Tag <span class="token keyword">from</span> <span class="token string">"../../components/Tag.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventMetadataSidebar <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventMetadataSidebar.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> EventBanner <span class="token keyword">from</span> <span class="token string">"../../components/Event/EventBanner.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> PopoverActorCard <span class="token keyword">from</span> <span class="token string">"../../components/Account/PopoverActorCard.vue"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IParticipant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/participant.model"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloCache<span class="token punctuation">,</span> FetchResult <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@apollo/client/core"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IEventMetadataDescription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types/event-metadata"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> eventMetaDataList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../services/EventMetadata"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// noinspection TypeScriptValidateTypes</span></span><br><span class="highlight-line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  components<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    Subtitle<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    BIcon<span class="token punctuation">,</span></span><br><span class="highlight-line">    DateCalendarIcon<span class="token punctuation">,</span></span><br><span class="highlight-line">    ReportModal<span class="token punctuation">,</span></span><br><span class="highlight-line">    IdentityPicker<span class="token punctuation">,</span></span><br><span class="highlight-line">    ParticipationSection<span class="token punctuation">,</span></span><br><span class="highlight-line">    CommentTree<span class="token punctuation">,</span></span><br><span class="highlight-line">    Tag<span class="token punctuation">,</span></span><br><span class="highlight-line">    PopoverActorCard<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventBanner<span class="token punctuation">,</span></span><br><span class="highlight-line">    EventMetadataSidebar<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function-variable function">ShareEventModal</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "shareEventModal" */</span> <span class="token string">"../../components/Event/ShareEventModal.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-twitch"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "twitchIntegration" */</span> <span class="token string">"../../components/Event/Integrations/Twitch.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-peertube"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "PeerTubeIntegration" */</span> <span class="token string">"../../components/Event/Integrations/PeerTube.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-youtube"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "YouTubeIntegration" */</span> <span class="token string">"../../components/Event/Integrations/YouTube.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-jitsi-meet"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "JitsiMeetIntegration" */</span> <span class="token string">"../../components/Event/Integrations/JitsiMeet.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"integration-etherpad"</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span></span><br><span class="highlight-line">      <span class="token keyword">import</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token comment">/* webpackChunkName: "EtherpadIntegration" */</span> <span class="token string">"../../components/Event/Integrations/Etherpad.vue"</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  apollo<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    event<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">        <span class="token punctuation">}</span><span class="token punctuation">;</span></mark><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> graphQLErrors <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleErrors</span><span class="token punctuation">(</span>graphQLErrors<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    currentActor<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">CURRENT_ACTOR_CLIENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    participations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          actorId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      subscribeToMore<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        document<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION_SUBSCRIPTION_CHANGED</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">            actorId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>person<span class="token punctuation">)</span> <span class="token keyword">return</span> data<span class="token punctuation">.</span>person<span class="token punctuation">.</span>participations<span class="token punctuation">.</span>elements<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    person<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      query<span class="token operator">:</span> <span class="token constant">PERSON_MEMBERSHIP_GROUP</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      fetchPolicy<span class="token operator">:</span> <span class="token string">"cache-and-network"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          group<span class="token operator">:</span> <span class="token function">usernameWithDomain</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo <span class="token operator">||</span></span><br><span class="highlight-line">          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token operator">?.</span>attributedTo<span class="token operator">?.</span>preferredUsername</span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    config<span class="token operator">:</span> <span class="token constant">CONFIG</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function">metaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">      <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventTitle<span class="token punctuation">,</span></span><br><span class="highlight-line">      meta<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">        <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"description"</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventDescription <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token keyword">extends</span> <span class="token class-name">EventMixin</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> uuid<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  event<span class="token operator">:</span> IEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  currentActor<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  identity<span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  config<span class="token operator">!</span><span class="token operator">:</span> IConfig<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  person<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  participations<span class="token operator">:</span> IParticipant<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  oldParticipationRole<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isReportModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isShareModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isJoinModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventVisibility <span class="token operator">=</span> EventVisibility<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventStatus <span class="token operator">=</span> EventStatus<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  EventJoinOptions <span class="token operator">=</span> EventJoinOptions<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  usernameWithDomain <span class="token operator">=</span> usernameWithDomain<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  RouteName <span class="token operator">=</span> RouteName<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  observer<span class="token operator">!</span><span class="token operator">:</span> IntersectionObserver<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  loadComments <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  anonymousParticipation<span class="token operator">:</span> boolean <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  actorForConfirmation<span class="token operator">!</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  messageForConfirmation <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> string <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> string <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>description<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>identity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"#comment-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>isSecureContext<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span></span><br><span class="highlight-line">          <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anonymousParticipationConfirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">AnonymousParticipationNotFoundError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line no-restricted-syntax</span></span><br><span class="highlight-line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments <span class="token operator">=</span> entry<span class="token punctuation">.</span>isIntersecting <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadComments<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">{</span></span><br><span class="highlight-line">        rootMargin<span class="token operator">:</span> <span class="token string">"-50px 0px -50px"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commentsObserver <span class="token keyword">as</span> Element<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">"eventDescription"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">eventDescription</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventDescription<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> eventDescriptionElement <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs</span><br><span class="highlight-line">        <span class="token punctuation">.</span>eventDescriptionElement <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      eventDescriptionElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">$event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token comment">// TODO: Find the right type for target</span></span><br><span class="highlight-line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> target <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> any <span class="token punctuation">}</span> <span class="token operator">=</span> $event<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">while</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>tagName <span class="token operator">!==</span> <span class="token string">"A"</span><span class="token punctuation">)</span> target <span class="token operator">=</span> target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token comment">// handle only links that occur inside the component and do not reference external resources</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">".hashtag"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token comment">// some sanity checks taken from vue-router:</span></span><br><span class="highlight-line">          <span class="token comment">// https://github.com/vuejs/vue-router/blob/dev/src/components/link.js#L106</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            altKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            ctrlKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            metaKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            shiftKey<span class="token punctuation">,</span></span><br><span class="highlight-line">            button<span class="token punctuation">,</span></span><br><span class="highlight-line">            defaultPrevented<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span> <span class="token operator">=</span> $event<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle with control keys</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>metaKey <span class="token operator">||</span> altKey <span class="token operator">||</span> ctrlKey <span class="token operator">||</span> shiftKey<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle when preventDefault called</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultPrevented<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle right clicks</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>button <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> button <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle if `target="_blank"`</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>getAttribute<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">const</span> linkTarget <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b_blank\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>linkTarget<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token comment">// don't handle same page links/anchors</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> to <span class="token operator">=</span> url<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> to <span class="token operator">&amp;&amp;</span> $event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            $event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"event-deleted"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">HOME</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br>  <span class="token comment">/**<br><span class="highlight-line">   * Delete the event, then redirect to home.</span><br>   */</span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">openDeleteEventModalWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">openDeleteEventModal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">reportEvent</span><span class="token punctuation">(</span>content<span class="token operator">:</span> string<span class="token punctuation">,</span> forward<span class="token operator">:</span> boolean<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isReportModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>reportModal<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> eventTitle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span>mutate<span class="token operator">&lt;</span>IReport<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        mutation<span class="token operator">:</span> <span class="token constant">CREATE_REPORT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          reportedId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">.</span>id <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          content<span class="token punctuation">,</span></span><br><span class="highlight-line">          forward<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Event {eventTitle} reported"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eventTitle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">joinEventWithConfirmation</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> IPerson<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>actorForConfirmation <span class="token operator">=</span> actor<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">joinEvent</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    identity<span class="token operator">:</span> IPerson<span class="token punctuation">,</span></span><br><span class="highlight-line">    message<span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinConfirmationModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>isJoinModalActive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> mutationData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$apollo<span class="token punctuation">.</span>mutate<span class="token operator">&lt;</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        joinEvent<span class="token operator">:</span> IParticipant<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        mutation<span class="token operator">:</span> <span class="token constant">JOIN_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        variables<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          message<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span></span><br>          <span class="token parameter">store<span class="token operator">:</span> ApolloCache<span class="token operator">&lt;</span><span class="token punctuation">{</span><br><span class="highlight-line">            joinEvent<span class="token operator">:</span> IParticipant<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">,</span></span><br>          <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token operator">:</span> FetchResult</span><br><span class="highlight-line">        <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">const</span> participationCachedData <span class="token operator">=</span> store<span class="token punctuation">.</span>readQuery<span class="token operator">&lt;</span><span class="token punctuation">{</span> person<span class="token operator">:</span> IPerson <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span> actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>participationCachedData<span class="token operator">?.</span>person <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">              <span class="token string">"Cannot update participation cache, because of null value."</span></span><br><span class="highlight-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          store<span class="token punctuation">.</span><span class="token function">writeQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> eventId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>id<span class="token punctuation">,</span> actorId<span class="token operator">:</span> identity<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            data<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">              person<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                <span class="token operator">...</span>participationCachedData<span class="token operator">?.</span>person<span class="token punctuation">,</span></span><br><span class="highlight-line">                participations<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                  elements<span class="token operator">:</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>joinEvent<span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">                  total<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">              <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">const</span> cachedData <span class="token operator">=</span> store<span class="token punctuation">.</span>readQuery<span class="token operator">&lt;</span><span class="token punctuation">{</span> event<span class="token operator">:</span> IEvent <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>uuid <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedData <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> event <span class="token punctuation">}</span> <span class="token operator">=</span> cachedData<span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">              <span class="token string">"Cannot update event participant cache, because of null value."</span></span><br><span class="highlight-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token keyword">const</span> participantStats <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>event<span class="token punctuation">.</span>participantStats <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>joinEvent<span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>notApproved <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>going <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            participantStats<span class="token punctuation">.</span>participant <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">          store<span class="token punctuation">.</span><span class="token function">writeQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">            query<span class="token operator">:</span> <span class="token constant">FETCH_EVENT</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            variables<span class="token operator">:</span> <span class="token punctuation">{</span> uuid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uuid <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            data<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">              event<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                <span class="token operator">...</span>event<span class="token punctuation">,</span></span><br><span class="highlight-line">                participantStats<span class="token punctuation">,</span></span><br><span class="highlight-line">              <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>mutationData<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>mutationData<span class="token punctuation">.</span>joinEvent<span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationRequestedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">confirmLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$buefy<span class="token punctuation">.</span>dialog<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'Leaving event "{title}"'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      message<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token string">'Are you sure you want to cancel your participation at event "{title}"?'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">          title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      confirmText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Leave event"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      cancelText<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Cancel"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">,</span></span><br><span class="highlight-line">      type<span class="token operator">:</span> <span class="token string">"is-danger"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      hasIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token function-variable function">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">leaveEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">"participations"</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">watchParticipations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">!==</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">NOT_APPROVED</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role</span><br><span class="highlight-line">      <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token keyword">case</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">PARTICIPANT</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">case</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationRejectedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">          <span class="token keyword">default</span><span class="token operator">:</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">participationChangedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>oldParticipationRole <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationConfirmedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been confirmed"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationRequestedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been requested"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationRejectedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation has been rejected"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">private</span> <span class="token function">participationChangedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$notifier<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">"Your participation status has been changed"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">downloadIcsEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">GRAPHQL_API_ENDPOINT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/events/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/export/ics</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"text/calendar"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.ics</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">triggerShare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore-start</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>share<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      navigator</span><br><span class="highlight-line">        <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">        <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">          title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span><br><span class="highlight-line">          url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>url<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Successful share"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Error sharing"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>isShareModalActive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token comment">// send popup</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">    <span class="token comment">// @ts-ignore-end</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">handleErrors</span><span class="token punctuation">(</span>errors<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      errors<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> error<span class="token punctuation">.</span>status_code <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token operator">||</span></span><br><span class="highlight-line">      errors<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> message <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"has invalid value $uuid"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> RouteName<span class="token punctuation">.</span><span class="token constant">PAGE_NOT_FOUND</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">actorIsParticipant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>actorIsOrganizer<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">PARTICIPANT</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">actorIsOrganizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>participations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">===</span> ParticipantRole<span class="token punctuation">.</span><span class="token constant">CREATOR</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">hasGroupPrivileges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token operator">?.</span>memberships<span class="token operator">?.</span>total <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token punctuation">[</span>MemberRole<span class="token punctuation">.</span><span class="token constant">MODERATOR</span><span class="token punctuation">,</span> MemberRole<span class="token punctuation">.</span><span class="token constant">ADMINISTRATOR</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token operator">?.</span>memberships<span class="token operator">?.</span>elements<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>role</span><br><span class="highlight-line">      <span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">canManageEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>actorIsOrganizer <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasGroupPrivileges<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">endDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Date <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn</span><br><span class="highlight-line">      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>endsOn</span><br><span class="highlight-line">      <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>beginsOn<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">eventCapacityOK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>draft<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity <span class="token operator">></span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>participantStats<span class="token punctuation">.</span>participant</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">numberOfPlacesStillAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>draft<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maximumAttendeeCapacity <span class="token operator">-</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>participantStats<span class="token punctuation">.</span>participant</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">anonymousParticipationConfirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token function">isParticipatingInThisEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">async</span> <span class="token function">cancelAnonymousParticipation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getLeaveTokenForParticipation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">leaveEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>anonymous<span class="token punctuation">.</span>actorId<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">await</span> <span class="token function">removeAnonymousParticipation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>anonymousParticipation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">ableToReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">&amp;&amp;</span></span><br><span class="highlight-line">      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentActor<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>anonymous<span class="token punctuation">.</span>reports<span class="token punctuation">.</span>allowed<span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">organizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IActor <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>attributedTo<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>organizerActor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>organizerActor<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">organizerDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>organizer<span class="token punctuation">.</span>domain<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  metadataToComponent<span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:twitch:url"</span><span class="token operator">:</span> <span class="token string">"integration-twitch"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:peertube:url"</span><span class="token operator">:</span> <span class="token string">"integration-peertube"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:live:youtube:url"</span><span class="token operator">:</span> <span class="token string">"integration-youtube"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:visio:jitsi_meet"</span><span class="token operator">:</span> <span class="token string">"integration-jitsi-meet"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"mz:notes:etherpad:url"</span><span class="token operator">:</span> <span class="token string">"integration-etherpad"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">get</span> <span class="token function">integrations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IEventMetadataDescription<span class="token operator">></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">.</span>metadata</span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> def <span class="token operator">=</span> eventMetaDataList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dat</span><span class="token punctuation">)</span> <span class="token operator">=></span> dat<span class="token punctuation">.</span>key <span class="token operator">===</span> val<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token operator">...</span>def<span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token operator">...</span>val<span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> IEventMetadataDescription<span class="token operator">></span><span class="token punctuation">,</span> metadata</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadataToComponent<span class="token punctuation">[</span>metadata<span class="token punctuation">.</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token comment">// eslint-disable-next-line @typescript-eslint/ban-ts-comment</span></span><br><span class="highlight-line">          <span class="token comment">// @ts-ignore</span></span><br><span class="highlight-line">          acc<span class="token punctuation">[</span>component<span class="token punctuation">]</span> <span class="token operator">=</span> metadata<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> acc<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="highlight-line"><span class="token selector">.section</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 2rem 4rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.fade-enter-active,<br>.fade-leave-active</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.fade-enter,<br>.fade-leave-to</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">div.sidebar</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> #b3b3b2<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 60px<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">div.organizer</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">color</span><span class="token punctuation">:</span> #4a4a4a<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      <span class="token selector">span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">line-height</span><span class="token punctuation">:</span> 2.7rem<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">padding-right</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.intro</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.is-3-tablet</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">p.tags</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token selector">&amp;.tag</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">margin</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.event-description-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br>  <span class="token selector">&amp; > aside,<br>  &amp; > div</span> <span class="token punctuation">{</span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 2rem auto<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">aside.event-metadata</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">min-width</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 672px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">padding-left</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">.sticky</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">div.event-description-comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">min-width</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">flex</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.description-content</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token selector">::v-deep h1</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep h2</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep h3</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep ul</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep li</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto 10px 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep blockquote</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">border-left</span><span class="token punctuation">:</span> 0.2em solid #333<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token property">padding-left</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token selector">::v-deep p</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">      <span class="token selector">a</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">padding</span><span class="token punctuation">:</span> 0.3rem<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">background</span><span class="token punctuation">:</span> $secondary<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token property">color</span><span class="token punctuation">:</span> #111<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token selector">&amp;:empty</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">padding-top</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">a h3#comments</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.more-events</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1rem 4rem<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">&amp; > .title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.dropdown .dropdown-trigger span</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">a.dropdown-item,<br><span class="highlight-line">.dropdown .dropdown-menu .has-link a,</span><br>button.dropdown-item</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding-right</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">a.participations-link</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.event-status .tag</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.no-border</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">cursor</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="token selector">.wrapper,<br>.intro-wrapper</span> <span class="token punctuation">{</span><br><span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.intro-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px 16px<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token selector">.date-calendar-icon-wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">align-self</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token property">margin-left</span><span class="token punctuation">:</span> 0rem<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token selector">.title</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="highlight-line"></span></code></pre>
</div>
<h2>Hyperlink with router 5/5 - GraphQL query with variable</h2>
<p>The named variable <code>$uuid</code> from the component's prop can be used for GraphQL query.</p>
<p>Browse code : <a href="https://framagit.org/framasoft/mobilizon/-/blob/09cc5d1bd1ecd24e1e879b0392cf5830b2581c74/js/src/graphql/event.ts">js/src/graphql/event.ts</a></p>
<p><button type="button" class="collapsible">Reveal code</button></p>
<div class="content">
<pre class="language-ts"><code class="language-ts"><span class="highlight-line"><span class="token keyword">import</span> gql <span class="token keyword">from</span> <span class="token string">"graphql-tag"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ADDRESS_FRAGMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./address"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">TAG_FRAGMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./tags"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="token keyword">const</span> <span class="token constant">PARTICIPANT_QUERY_FRAGMENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  fragment ParticipantQuery on Participant {</span><br><span class="highlight-line">    role</span><br><span class="highlight-line">    id</span><br><span class="highlight-line">    actor {</span><br><span class="highlight-line">      preferredUsername</span><br><span class="highlight-line">      avatar {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      domain</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    event {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      uuid</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    metadata {</span><br><span class="highlight-line">      cancellationToken</span><br><span class="highlight-line">      message</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    insertedAt</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">const</span> <span class="token constant">PARTICIPANTS_QUERY_FRAGMENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  fragment ParticipantsQuery on PaginatedParticipantList {</span><br><span class="highlight-line">    total</span><br><span class="highlight-line">    elements {</span><br><span class="highlight-line">      ...ParticipantQuery</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PARTICIPANT_QUERY_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">const</span> <span class="token constant">EVENT_OPTIONS_FRAGMENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  fragment EventOptions on EventOptions {</span><br><span class="highlight-line">    maximumAttendeeCapacity</span><br><span class="highlight-line">    remainingAttendeeCapacity</span><br><span class="highlight-line">    showRemainingAttendeeCapacity</span><br><span class="highlight-line">    anonymousParticipation</span><br><span class="highlight-line">    showStartTime</span><br><span class="highlight-line">    showEndTime</span><br><span class="highlight-line">    offers {</span><br><span class="highlight-line">      price</span><br><span class="highlight-line">      priceCurrency</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    participationConditions {</span><br><span class="highlight-line">      title</span><br><span class="highlight-line">      content</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    attendees</span><br><span class="highlight-line">    program</span><br><span class="highlight-line">    commentModeration</span><br><span class="highlight-line">    showParticipationPrice</span><br><span class="highlight-line">    hideOrganizerWhenGroupEvent</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">const</span> <span class="token constant">FULL_EVENT_FRAGMENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  fragment FullEvent on Event {</span><br><span class="highlight-line">    id</span><br><span class="highlight-line">    uuid</span><br><span class="highlight-line">    url</span><br><span class="highlight-line">    local</span><br><span class="highlight-line">    title</span><br><span class="highlight-line">    description</span><br><span class="highlight-line">    beginsOn</span><br><span class="highlight-line">    endsOn</span><br><span class="highlight-line">    status</span><br><span class="highlight-line">    visibility</span><br><span class="highlight-line">    joinOptions</span><br><span class="highlight-line">    draft</span><br><span class="highlight-line">    picture {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      metadata {</span><br><span class="highlight-line">        width</span><br><span class="highlight-line">        height</span><br><span class="highlight-line">        blurhash</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    publishAt</span><br><span class="highlight-line">    onlineAddress</span><br><span class="highlight-line">    phoneAddress</span><br><span class="highlight-line">    physicalAddress {</span><br><span class="highlight-line">      ...AdressFragment</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    organizerActor {</span><br><span class="highlight-line">      avatar {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      preferredUsername</span><br><span class="highlight-line">      domain</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      summary</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    contacts {</span><br><span class="highlight-line">      avatar {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      preferredUsername</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      summary</span><br><span class="highlight-line">      domain</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    attributedTo {</span><br><span class="highlight-line">      avatar {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      preferredUsername</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      summary</span><br><span class="highlight-line">      domain</span><br><span class="highlight-line">      url</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    participantStats {</span><br><span class="highlight-line">      going</span><br><span class="highlight-line">      notApproved</span><br><span class="highlight-line">      participant</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    tags {</span><br><span class="highlight-line">      ...TagFragment</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    relatedEvents {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      uuid</span><br><span class="highlight-line">      title</span><br><span class="highlight-line">      beginsOn</span><br><span class="highlight-line">      picture {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">        name</span><br><span class="highlight-line">        metadata {</span><br><span class="highlight-line">          width</span><br><span class="highlight-line">          height</span><br><span class="highlight-line">          blurhash</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      physicalAddress {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        description</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      organizerActor {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        avatar {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          url</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        preferredUsername</span><br><span class="highlight-line">        domain</span><br><span class="highlight-line">        name</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    options {</span><br><span class="highlight-line">      ...EventOptions</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">    metadata {</span><br><span class="highlight-line">      key</span><br><span class="highlight-line">      title</span><br><span class="highlight-line">      value</span><br><span class="highlight-line">      type</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">ADDRESS_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">TAG_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">EVENT_OPTIONS_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><mark class="highlight-line highlight-line-active">  query FetchEvent($uuid: UUID!) {</mark><br><span class="highlight-line">    event(uuid: $uuid) {</span><br><span class="highlight-line">      ...FullEvent</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">FULL_EVENT_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_EVENT_BASIC</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query ($uuid: UUID!) {</span><br><span class="highlight-line">    event(uuid: $uuid) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      uuid</span><br><span class="highlight-line">      joinOptions</span><br><span class="highlight-line">      participantStats {</span><br><span class="highlight-line">        going</span><br><span class="highlight-line">        notApproved</span><br><span class="highlight-line">        notConfirmed</span><br><span class="highlight-line">        participant</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_EVENTS</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query FetchEvents(</span><br><span class="highlight-line">    $orderBy: EventOrderBy</span><br><span class="highlight-line">    $direction: SortDirection</span><br><span class="highlight-line">    $page: Int</span><br><span class="highlight-line">    $limit: Int</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    events(</span><br><span class="highlight-line">      orderBy: $orderBy</span><br><span class="highlight-line">      direction: $direction</span><br><span class="highlight-line">      page: $page</span><br><span class="highlight-line">      limit: $limit</span><br><span class="highlight-line">    ) {</span><br><span class="highlight-line">      total</span><br><span class="highlight-line">      elements {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        uuid</span><br><span class="highlight-line">        url</span><br><span class="highlight-line">        local</span><br><span class="highlight-line">        title</span><br><span class="highlight-line">        description</span><br><span class="highlight-line">        beginsOn</span><br><span class="highlight-line">        endsOn</span><br><span class="highlight-line">        status</span><br><span class="highlight-line">        visibility</span><br><span class="highlight-line">        insertedAt</span><br><span class="highlight-line">        picture {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          url</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        publishAt</span><br><span class="highlight-line">        # online_address,</span><br><span class="highlight-line">        # phone_address,</span><br><span class="highlight-line">        physicalAddress {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          description</span><br><span class="highlight-line">          locality</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        organizerActor {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          avatar {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">            url</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          preferredUsername</span><br><span class="highlight-line">          domain</span><br><span class="highlight-line">          name</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        attributedTo {</span><br><span class="highlight-line">          avatar {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">            url</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          preferredUsername</span><br><span class="highlight-line">          name</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        category</span><br><span class="highlight-line">        tags {</span><br><span class="highlight-line">          ...TagFragment</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">TAG_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CREATE_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation createEvent(</span><br><span class="highlight-line">    $organizerActorId: ID!</span><br><span class="highlight-line">    $attributedToId: ID</span><br><span class="highlight-line">    $title: String!</span><br><span class="highlight-line">    $description: String!</span><br><span class="highlight-line">    $beginsOn: DateTime!</span><br><span class="highlight-line">    $endsOn: DateTime</span><br><span class="highlight-line">    $status: EventStatus</span><br><span class="highlight-line">    $visibility: EventVisibility</span><br><span class="highlight-line">    $joinOptions: EventJoinOptions</span><br><span class="highlight-line">    $draft: Boolean</span><br><span class="highlight-line">    $tags: [String]</span><br><span class="highlight-line">    $picture: MediaInput</span><br><span class="highlight-line">    $onlineAddress: String</span><br><span class="highlight-line">    $phoneAddress: String</span><br><span class="highlight-line">    $category: String</span><br><span class="highlight-line">    $physicalAddress: AddressInput</span><br><span class="highlight-line">    $options: EventOptionsInput</span><br><span class="highlight-line">    $contacts: [Contact]</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    createEvent(</span><br><span class="highlight-line">      organizerActorId: $organizerActorId</span><br><span class="highlight-line">      attributedToId: $attributedToId</span><br><span class="highlight-line">      title: $title</span><br><span class="highlight-line">      description: $description</span><br><span class="highlight-line">      beginsOn: $beginsOn</span><br><span class="highlight-line">      endsOn: $endsOn</span><br><span class="highlight-line">      status: $status</span><br><span class="highlight-line">      visibility: $visibility</span><br><span class="highlight-line">      joinOptions: $joinOptions</span><br><span class="highlight-line">      draft: $draft</span><br><span class="highlight-line">      tags: $tags</span><br><span class="highlight-line">      picture: $picture</span><br><span class="highlight-line">      onlineAddress: $onlineAddress</span><br><span class="highlight-line">      phoneAddress: $phoneAddress</span><br><span class="highlight-line">      category: $category</span><br><span class="highlight-line">      physicalAddress: $physicalAddress</span><br><span class="highlight-line">      options: $options</span><br><span class="highlight-line">      contacts: $contacts</span><br><span class="highlight-line">    ) {</span><br><span class="highlight-line">      ...FullEvent</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">FULL_EVENT_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">EDIT_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation updateEvent(</span><br><span class="highlight-line">    $id: ID!</span><br><span class="highlight-line">    $title: String</span><br><span class="highlight-line">    $description: String</span><br><span class="highlight-line">    $beginsOn: DateTime</span><br><span class="highlight-line">    $endsOn: DateTime</span><br><span class="highlight-line">    $status: EventStatus</span><br><span class="highlight-line">    $visibility: EventVisibility</span><br><span class="highlight-line">    $joinOptions: EventJoinOptions</span><br><span class="highlight-line">    $draft: Boolean</span><br><span class="highlight-line">    $tags: [String]</span><br><span class="highlight-line">    $picture: MediaInput</span><br><span class="highlight-line">    $onlineAddress: String</span><br><span class="highlight-line">    $phoneAddress: String</span><br><span class="highlight-line">    $organizerActorId: ID</span><br><span class="highlight-line">    $attributedToId: ID</span><br><span class="highlight-line">    $category: String</span><br><span class="highlight-line">    $physicalAddress: AddressInput</span><br><span class="highlight-line">    $options: EventOptionsInput</span><br><span class="highlight-line">    $contacts: [Contact]</span><br><span class="highlight-line">    $metadata: EventMetadataInput</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    updateEvent(</span><br><span class="highlight-line">      eventId: $id</span><br><span class="highlight-line">      title: $title</span><br><span class="highlight-line">      description: $description</span><br><span class="highlight-line">      beginsOn: $beginsOn</span><br><span class="highlight-line">      endsOn: $endsOn</span><br><span class="highlight-line">      status: $status</span><br><span class="highlight-line">      visibility: $visibility</span><br><span class="highlight-line">      joinOptions: $joinOptions</span><br><span class="highlight-line">      draft: $draft</span><br><span class="highlight-line">      tags: $tags</span><br><span class="highlight-line">      picture: $picture</span><br><span class="highlight-line">      onlineAddress: $onlineAddress</span><br><span class="highlight-line">      phoneAddress: $phoneAddress</span><br><span class="highlight-line">      organizerActorId: $organizerActorId</span><br><span class="highlight-line">      attributedToId: $attributedToId</span><br><span class="highlight-line">      category: $category</span><br><span class="highlight-line">      physicalAddress: $physicalAddress</span><br><span class="highlight-line">      options: $options</span><br><span class="highlight-line">      contacts: $contacts</span><br><span class="highlight-line">      metadata: $metadata</span><br><span class="highlight-line">    ) {</span><br><span class="highlight-line">      ...FullEvent</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">FULL_EVENT_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">JOIN_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation JoinEvent(</span><br><span class="highlight-line">    $eventId: ID!</span><br><span class="highlight-line">    $actorId: ID!</span><br><span class="highlight-line">    $email: String</span><br><span class="highlight-line">    $message: String</span><br><span class="highlight-line">    $locale: String</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    joinEvent(</span><br><span class="highlight-line">      eventId: $eventId</span><br><span class="highlight-line">      actorId: $actorId</span><br><span class="highlight-line">      email: $email</span><br><span class="highlight-line">      message: $message</span><br><span class="highlight-line">      locale: $locale</span><br><span class="highlight-line">    ) {</span><br><span class="highlight-line">      ...ParticipantQuery</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PARTICIPANT_QUERY_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">LEAVE_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation LeaveEvent($eventId: ID!, $actorId: ID!, $token: String) {</span><br><span class="highlight-line">    leaveEvent(eventId: $eventId, actorId: $actorId, token: $token) {</span><br><span class="highlight-line">      actor {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CONFIRM_PARTICIPATION</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation ConfirmParticipation($token: String!) {</span><br><span class="highlight-line">    confirmParticipation(confirmationToken: $token) {</span><br><span class="highlight-line">      actor {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      event {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        uuid</span><br><span class="highlight-line">        joinOptions</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      role</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">UPDATE_PARTICIPANT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation UpdateParticipant($id: ID!, $role: ParticipantRoleEnum!) {</span><br><span class="highlight-line">    updateParticipation(id: $id, role: $role) {</span><br><span class="highlight-line">      role</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DELETE_EVENT</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  mutation DeleteEvent($eventId: ID!) {</span><br><span class="highlight-line">    deleteEvent(eventId: $eventId) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">PARTICIPANTS</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query Participants($uuid: UUID!, $page: Int, $limit: Int, $roles: String) {</span><br><span class="highlight-line">    event(uuid: $uuid) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      uuid</span><br><span class="highlight-line">      title</span><br><span class="highlight-line">      participants(page: $page, limit: $limit, roles: $roles) {</span><br><span class="highlight-line">        ...ParticipantsQuery</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">      participantStats {</span><br><span class="highlight-line">        going</span><br><span class="highlight-line">        notApproved</span><br><span class="highlight-line">        rejected</span><br><span class="highlight-line">        participant</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br><span class="highlight-line">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PARTICIPANTS_QUERY_FRAGMENT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">EVENT_PERSON_PARTICIPATION</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query EventPersonParticipation($actorId: ID!, $eventId: ID!) {</span><br><span class="highlight-line">    person(id: $actorId) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      participations(eventId: $eventId) {</span><br><span class="highlight-line">        total</span><br><span class="highlight-line">        elements {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          role</span><br><span class="highlight-line">          actor {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          event {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">EVENT_PERSON_PARTICIPATION_SUBSCRIPTION_CHANGED</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  subscription EventPersonParticipationSubscriptionChanged(</span><br><span class="highlight-line">    $actorId: ID!</span><br><span class="highlight-line">    $eventId: ID!</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    eventPersonParticipationChanged(personId: $actorId) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      participations(eventId: $eventId) {</span><br><span class="highlight-line">        total</span><br><span class="highlight-line">        elements {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          role</span><br><span class="highlight-line">          actor {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          event {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_GROUP_EVENTS</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query FetchGroupEvents(</span><br><span class="highlight-line">    $name: String!</span><br><span class="highlight-line">    $afterDateTime: DateTime</span><br><span class="highlight-line">    $beforeDateTime: DateTime</span><br><span class="highlight-line">    $organisedEventsPage: Int</span><br><span class="highlight-line">    $organisedEventslimit: Int</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    group(preferredUsername: $name) {</span><br><span class="highlight-line">      id</span><br><span class="highlight-line">      preferredUsername</span><br><span class="highlight-line">      domain</span><br><span class="highlight-line">      name</span><br><span class="highlight-line">      organizedEvents(</span><br><span class="highlight-line">        afterDatetime: $afterDateTime</span><br><span class="highlight-line">        beforeDatetime: $beforeDateTime</span><br><span class="highlight-line">        page: $organisedEventsPage</span><br><span class="highlight-line">        limit: $organisedEventslimit</span><br><span class="highlight-line">      ) {</span><br><span class="highlight-line">        elements {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          uuid</span><br><span class="highlight-line">          title</span><br><span class="highlight-line">          beginsOn</span><br><span class="highlight-line">          draft</span><br><span class="highlight-line">          options {</span><br><span class="highlight-line">            maximumAttendeeCapacity</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          participantStats {</span><br><span class="highlight-line">            participant</span><br><span class="highlight-line">            notApproved</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          attributedTo {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">            preferredUsername</span><br><span class="highlight-line">            name</span><br><span class="highlight-line">            domain</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          organizerActor {</span><br><span class="highlight-line">            id</span><br><span class="highlight-line">            preferredUsername</span><br><span class="highlight-line">            name</span><br><span class="highlight-line">            domain</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        total</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CLOSE_EVENTS</span> <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br><span class="highlight-line">  query CloseEvents($location: String, $radius: Float) {</span><br><span class="highlight-line">    searchEvents(location: $location, radius: $radius, page: 1, limit: 10) {</span><br><span class="highlight-line">      total</span><br><span class="highlight-line">      elements {</span><br><span class="highlight-line">        id</span><br><span class="highlight-line">        title</span><br><span class="highlight-line">        uuid</span><br><span class="highlight-line">        beginsOn</span><br><span class="highlight-line">        picture {</span><br><span class="highlight-line">          id</span><br><span class="highlight-line">          url</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        tags {</span><br><span class="highlight-line">          slug</span><br><span class="highlight-line">          title</span><br><span class="highlight-line">        }</span><br><span class="highlight-line">        __typename</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="highlight-line"></span></code></pre>
</div>

  </body>
  <script>
  var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.parentNode.nextElementSibling; // Since markdown adds <p> we get the contente from parent sibling
    if (content.style.display === "block") {
      content.style.display = "none";
    } else {
      content.style.display = "block";
    }
  });
}</script>
</html>