/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package baldir.fr

import kotlin.test.Test
import kotlin.test.assertEquals

class AppTest {
    @Test
    fun convertJsonToYml() {
        assertEquals(expectedData(), toData(jsonInput()))
    }

    @Test
    fun formatYmlToText() {
        val ymlData = toData(jsonInput())
        val ymlText = toYmlText(ymlData)
        assertEquals(expectedYmlText(), ymlText)
    }

    private fun expectedYmlText(): String {
        return """# Editing guidelines: https://github.com/watch-devtube/contrib/#how-to-edit-video-metadata

    tags:
       - bdd
       - tdd
       - test-driven development
       - clean architecture
       - exemples
       - meetup
       - software craftsmanship
       - domain-driven design
       - ddd
       - behaviour-driven design
    speaker:
        name: Michaël AZERHAD
    #    twitter: SpeakerTwitterHandle (no @)
    title: BDD, DDD, ATDD et TDD expliqués !
    # language: English
    # category: conference # or vlog
    recordingDate: 1539259200
    description: "Michaël AZERHAD de la société WealCome est l'invité de Numendo aujourd'hui  !\n\nLes quiproquo, ennemis numéro d'un projet informatique !\nComment les identifier ?\nComment les prévenir par les biais de conversations et de techniques ?\n\nMichaël présente à travers son humour et des exemples précis les 4 pratiques phares de l'artisanat logiciel et les liens qui les unissent :\nBDD / DDD / ATDD / TDD\n\nÀ voir !\n\nPour découvrir les prestations de WealCome, experte au niveau de toutes ces pratiques : http://wealcomecompany.com""""
    }

    private fun expectedData(): Data {
        return Data(title = "BDD, DDD, ATDD et TDD expliqués !", fulltitle = "BDD, DDD, ATDD et TDD expliqués !", playlist_id = "UUdcsr2L2WC0OON39Ar3hBKQ", description = """Michaël AZERHAD de la société WealCome est l'invité de Numendo aujourd'hui  !

    Les quiproquo, ennemis numéro d'un projet informatique !
    Comment les identifier ?
    Comment les prévenir par les biais de conversations et de techniques ?

    Michaël présente à travers son humour et des exemples précis les 4 pratiques phares de l'artisanat logiciel et les liens qui les unissent :
    BDD / DDD / ATDD / TDD

    À voir !

    Pour découvrir les prestations de WealCome, experte au niveau de toutes ces pratiques : http://wealcomecompany.com""", playlist_uploader = "Michaël AZERHAD", uploader_id = "UCdcsr2L2WC0OON39Ar3hBKQ", tags = listOf("bdd", "tdd", "test-driven development", "clean architecture", "exemples", "meetup", "software craftsmanship", "domain-driven design", "ddd", "behaviour-driven design"), upload_date = "20181011", display_id = "jxBmKvS7lAo")
    }


    fun jsonInput(): String {
        return """{"upload_date": "20181011", "protocol": "https", "creator": null, "series": null, "format_note": "hd720", "chapters": null, "height": 720, "thumbnail": "https://i.ytimg.com/vi/jxBmKvS7lAo/hqdefault.jpg", "like_count": 49, "duration": 9173, "fulltitle": "BDD, DDD, ATDD et TDD expliqu\u00e9s !", "quality": 2, "playlist_index": 1, "view_count": 1931, "playlist": "Uploads from Micha\u00ebl AZERHAD", "start_time": null, "title": "BDD, DDD, ATDD et TDD expliqu\u00e9s !", "_filename": "BDD, DDD, ATDD et TDD expliqu\u00e9s !-jxBmKvS7lAo.mp4", "tags": ["bdd", "tdd", "test-driven development", "clean architecture", "exemples", "meetup", "software craftsmanship", "domain-driven design", "ddd", "behaviour-driven design"], "is_live": null, "id": "jxBmKvS7lAo", "dislike_count": 3, "playlist_id": "UUdcsr2L2WC0OON39Ar3hBKQ", "abr": 192, "uploader_url": "http://www.youtube.com/channel/UCdcsr2L2WC0OON39Ar3hBKQ", "filesize": null, "fps": null, "season_number": null, "annotations": null, "webpage_url_basename": "jxBmKvS7lAo", "acodec": "mp4a.40.2", "display_id": "jxBmKvS7lAo", "asr": 44100, "automatic_captions": {}, "description": "Micha\u00ebl AZERHAD de la soci\u00e9t\u00e9 WealCome est l'invit\u00e9 de Numendo aujourd'hui  !\n\nLes quiproquo, ennemis num\u00e9ro d'un projet informatique !\nComment les identifier ?\nComment les pr\u00e9venir par les biais de conversations et de techniques ?\n\nMicha\u00ebl pr\u00e9sente \u00e0 travers son humour et des exemples pr\u00e9cis les 4 pratiques phares de l'artisanat logiciel et les liens qui les unissent :\nBDD / DDD / ATDD / TDD\n\n\u00c0 voir !\n\nPour d\u00e9couvrir les prestations de WealCome, experte au niveau de toutes ces pratiques : http://wealcomecompany.com", "format": "22 - 1280x720 (hd720)", "track": null, "playlist_uploader": "Micha\u00ebl AZERHAD", "tbr": 593.927, "average_rating": null, "uploader": "Micha\u00ebl AZERHAD", "format_id": "22", "episode_number": null, "subtitles": {}, "uploader_id": "UCdcsr2L2WC0OON39Ar3hBKQ", "categories": ["Education"], "playlist_title": "Uploads from Micha\u00ebl AZERHAD", "alt_title": null}"""
    }

}
