type: edu
custom_name: stage7
files:
- name: test/FlashcardsTest.java
  visible: false
  text: "import org.hyperskill.hstest.dynamic.input.DynamicTestingMethod;\nimport\
    \ org.hyperskill.hstest.exception.outcomes.WrongAnswer;\nimport org.hyperskill.hstest.stage.StageTest;\n\
    import org.hyperskill.hstest.testcase.CheckResult;\nimport org.hyperskill.hstest.testcase.TestCase;\n\
    import org.hyperskill.hstest.testing.TestedProgram;\nimport org.junit.AfterClass;\n\
    import org.junit.BeforeClass;\n\nimport java.io.BufferedReader;\nimport java.io.File;\n\
    import java.io.FileReader;\nimport java.io.IOException;\nimport java.util.Arrays;\n\
    import java.util.List;\n\npublic class FlashcardsTest extends StageTest<String>\
    \ {\n    \n    private static List<String> listOfTerms;\n    private static List<String>\
    \ listOfDefinitions;\n    private static List<String> listOfAddedDefinitions;\n\
    \    private static List<String> listOfCountries;\n    private static List<String>\
    \ listOfCapitals;\n    private final String capitalsFile = \"capitals.txt\";\n\
    \    private final String capitalsNewFile = \"capitalsNew.txt\";\n    \n    @BeforeClass\n\
    \    public static void generateLists() {\n        listOfTerms = getListOfTerms();\n\
    \        listOfDefinitions = getListOfDefinitions();\n        listOfAddedDefinitions\
    \ = getListOfWrongDefinitions1();\n        listOfCountries = getListOfCountries();\n\
    \        listOfCapitals = getListOfCapitals();\n    }\n    \n    @AfterClass\n\
    \    public static void deleteFiles() {\n        File capitalsFile = new File(\"\
    capitals.txt\");\n        //noinspection ResultOfMethodCallIgnored\n        capitalsFile.delete();\n\
    \        \n        File capitalsNewFile = new File(\"capitalsNew.txt\");\n   \
    \     //noinspection ResultOfMethodCallIgnored\n        capitalsNewFile.delete();\n\
    \        \n        File logFile = new File(\"todayLog.txt\");\n        //noinspection\
    \ ResultOfMethodCallIgnored\n        logFile.delete();\n    \n        File fridayFile\
    \ = new File(\"fridayThe13th.txt\");\n        //noinspection ResultOfMethodCallIgnored\n\
    \        fridayFile.delete();\n    \n        File newFridayFile = new File(\"\
    newFridayThe13th.txt\");\n        //noinspection ResultOfMethodCallIgnored\n \
    \       newFridayFile.delete();\n        \n    }\n    \n    @DynamicTestingMethod\n\
    \    CheckResult test1() {\n        TestedProgram main = new TestedProgram();\n\
    \        \n        String output = main.start().toLowerCase().trim();\n      \
    \  if (!output.contains(\"input the action\")) {\n            return CheckResult.wrong(\"\
    Your program should prompt the user for an action with the message \\\"Input the\
    \ \" +\n                    \"action\\\"\");\n        }\n    \n        output\
    \ = main.execute(\"exit\").toLowerCase();\n        if (!output.contains(\"bye\"\
    )) {\n            return CheckResult.wrong(\"Your program should print \\\"Bye\
    \ bye!\\\" and terminate if the user enters \" +\n                    \"\\\"exit\\\
    \"\");\n        }\n    \n        if (!main.isFinished()) {\n            return\
    \ CheckResult.wrong(\"Your program should terminate if the user enters \\\"exit\\\
    \"\");\n        }\n        \n        return CheckResult.correct();\n    }\n  \
    \  \n    //Test to check the \"add\" action\n    @DynamicTestingMethod\n    CheckResult\
    \ test2() {\n        TestedProgram main = new TestedProgram();\n        main.start();\n\
    \        \n        String output;\n        String lastLine;\n        String[]\
    \ lines;\n        \n        output = main.execute(\"add\").toLowerCase();\n  \
    \      if (!output.contains(\"card\")) {\n            return CheckResult.wrong(\"\
    Your program should output the message \\\"The card:\\\" when the 'add' action\
    \ is \" +\n                    \"selected\");\n        }\n        \n        output\
    \ = main.execute(\"France\").toLowerCase();\n        if (!output.contains(\"definition\
    \ of the card\")) {\n            return CheckResult.wrong(\"Your program should\
    \ prompt the user for the definition of the card with the \" +\n             \
    \       \"message \\\"The definition of the card:\\\"\");\n        }\n       \
    \ \n        output = main.execute(\"Paris\").toLowerCase();\n        if (!output.contains(\"\
    pair (\\\"france\\\":\\\"paris\\\") has been added\")) {\n            return CheckResult.wrong(\"\
    Your program should print the message \\\"The pair (\\\"term\\\":\\\"definition\\\
    \") has \" +\n                    \"been added\\\" after adding a card successfully\"\
    );\n        }\n        \n        lines = output.split(\"\\n\");\n        lastLine\
    \ = lines[lines.length - 1];\n        if (!lastLine.contains(\"input the action\"\
    )) {\n            return CheckResult.wrong(\"Your program should continue to request\
    \ an action from the user until they \" +\n                    \"enter \\\"exit\\\
    \"\");\n        }\n        \n        main.execute(\"add\");\n        output =\
    \ main.execute(\"France\").toLowerCase();\n        if (!output.contains(\"card\
    \ \\\"france\\\" already exists\")) {\n            return CheckResult.wrong(\"\
    Your program should not add a card that already exists and should notify the \"\
    \ +\n                    \"user with the message \\\"The card 'term' already exists\\\
    \".\");\n        }\n        \n        lines = output.split(\"\\n\");\n       \
    \ lastLine = lines[lines.length - 1];\n        if (!lastLine.contains(\"input\
    \ the action\")) {\n            return CheckResult.wrong(\"Your program should\
    \ request an action from the user if a card was declined \" +\n              \
    \      \"because it already exists\");\n        }\n        \n        main.execute(\"\
    add\");\n        main.execute(\"Great Britain\");\n        output = main.execute(\"\
    Paris\").toLowerCase();\n        if (!output.contains(\"definition \\\"paris\\\
    \" already exists\")) {\n            return CheckResult.wrong(\"Your program should\
    \ not add a definition that already exists and should notify \" +\n          \
    \          \"the \\\"user with the message \\\"The definition 'definition' already\
    \ exists\\\".\");\n        }\n    \n        output = main.execute(\"exit\").toLowerCase();\n\
    \        if (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"\
    Your program should print \\\"Bye bye!\\\" and terminate if the user enters \"\
    \ +\n                    \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    //Test to check the \"remove\" action\n    @DynamicTestingMethod\n\
    \    CheckResult test3() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start();\n        \n        String output;\n        String lastLine;\n\
    \        String[] lines;\n        \n        //No need to check user's output because\
    \ they have been checked in test 2.\n        main.execute(\"add\");\n        main.execute(\"\
    France\");\n        main.execute(\"Paris\");\n        \n        main.execute(\"\
    add\");\n        main.execute(\"Japan\");\n        main.execute(\"Tokyo\");\n\
    \        \n        main.execute(\"add\");\n        main.execute(\"Great Britain\"\
    );\n        main.execute(\"London\");\n        \n        output = main.execute(\"\
    remove\").toLowerCase();\n        if (!output.contains(\"which card\")) {\n  \
    \          return CheckResult.wrong(\"Your program should prompt the user for\
    \ the name of the card with the message \" +\n                    \"\\\"Which\
    \ card?\\\"\");\n        }\n        \n        output = main.execute(\"Japan\"\
    ).toLowerCase();\n        if (!output.contains(\"card has been removed\")) {\n\
    \            return CheckResult.wrong(\"Your program should notify the user with\
    \ the message \" +\n                    \"\\\"The card has been removed.\\\" if\
    \ the card was removed successfully\");\n        }\n        \n        lines =\
    \ output.split(\"\\n\");\n        lastLine = lines[lines.length - 1];\n      \
    \  if (!lastLine.contains(\"input the action\")) {\n            return CheckResult.wrong(\"\
    Your program should continue to request an action from the user until they \"\
    \ +\n                    \"enter \\\"exit\\\"\");\n        }\n        \n     \
    \   main.execute(\"remove\");\n        output = main.execute(\"Wakanda\").toLowerCase();\n\
    \        if (!output.contains(\"can't remove \\\"wakanda\\\"\")) {\n         \
    \   return CheckResult.wrong(\"Your program should notify the user with the message\"\
    \ +\n                    \" \\\"Can't remove 'card': there is no such card.\\\"\
    \ if the card doesn't exist\");\n        }\n        \n        if (!output.contains(\"\
    no such card\")) {\n            return CheckResult.wrong(\"Your program should\
    \ notify the user with the message\" +\n                    \" \\\"Can't remove\
    \ 'card': there is no such card.\\\" if the card doesn't exist\");\n        }\n\
    \        \n        lines = output.split(\"\\n\");\n        lastLine = lines[lines.length\
    \ - 1];\n        if (!lastLine.contains(\"input the action\")) {\n           \
    \ return CheckResult.wrong(\"Your program should request an action from the user\
    \ even if a card could not be\" +\n                    \" removed\");\n      \
    \  }\n        \n        main.execute(\"remove\");\n        output = main.execute(\"\
    Tokyo\").toLowerCase();\n        if (output.contains(\"card has been removed\"\
    )) {\n            return CheckResult.wrong(\"You should not be able to remove\
    \ a card by it's definition\");\n        }\n    \n        output = main.execute(\"\
    exit\").toLowerCase();\n        if (!output.contains(\"bye\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    //Test to check\
    \ \"export\" action\n    @DynamicTestingMethod\n    CheckResult test4() {\n  \
    \      TestedProgram main = new TestedProgram();\n        main.start();\n    \
    \    \n        String output;\n        String lastLine;\n        String[] lines;\n\
    \        boolean fileExists;\n        boolean empty;\n        \n        main.execute(\"\
    add\");\n        main.execute(\"Japan\");\n        main.execute(\"Tokyo\");\n\
    \        \n        main.execute(\"add\");\n        main.execute(\"France\");\n\
    \        main.execute(\"Paris\");\n        \n        output = main.execute(\"\
    export\").toLowerCase();\n        if (!output.contains(\"file name\")) {\n   \
    \         return CheckResult.wrong(\"Your program should prompt the user for the\
    \ name of the file with the message \" +\n                    \"\\\"File name:\\\
    \"\");\n        }\n        \n        output = main.execute(capitalsFile).toLowerCase();\n\
    \        if (!output.contains(\"2 cards\")) {\n            return CheckResult.wrong(\"\
    Wrong number of cards were exported. Expected 2\");\n        }\n        \n   \
    \     if (!output.contains(\"saved\")) {\n            return CheckResult.wrong(\"\
    Your program should notify the user if the cards were exported with the message\
    \ \" +\n                    \"\\\"n cards have been saved.\\\" where \\\"n\\\"\
    \ is the number of cards exported\");\n        }\n        \n        fileExists\
    \ = checkFileExistence(capitalsFile);\n        if (!fileExists) {\n          \
    \  return CheckResult.wrong(\"Your program did not save a file after exporting\"\
    );\n        }\n        \n        empty = isEmpty(capitalsFile);\n        if (empty)\
    \ {\n            return CheckResult.wrong(\"The file your program saves is empty\"\
    );\n        }\n        \n        lines = output.split(\"\\n\");\n        lastLine\
    \ = lines[lines.length - 1];\n        if (!lastLine.contains(\"input the action\"\
    )) {\n            return CheckResult.wrong(\"Your program should continue to request\
    \ an action from the user until they \" +\n                    \"enter \\\"exit\\\
    \"\");\n        }\n    \n        output = main.execute(\"exit\").toLowerCase();\n\
    \        if (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"\
    Your program should print \\\"Bye bye!\\\" and terminate if the user enters \"\
    \ +\n                    \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    //saves file for the next test\n    @DynamicTestingMethod\n\
    \    CheckResult test5() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start();\n        \n        String output;\n        boolean fileExists;\n\
    \        boolean empty;\n        \n        for (int i = 0; i < listOfCountries.size();\
    \ i++) {\n            main.execute(\"add\");\n            main.execute(listOfCountries.get(i));\n\
    \            main.execute(listOfCapitals.get(i));\n        }\n        \n     \
    \   main.execute(\"export\");\n        output = main.execute(capitalsNewFile).toLowerCase();\n\
    \        if (!output.contains(\"6 cards\")) {\n            return CheckResult.wrong(\"\
    Wrong number of cards were exported. Expected 6\");\n        }\n        \n   \
    \     if (!output.contains(\"saved\")) {\n            return CheckResult.wrong(\"\
    Your program should notify the user if the cards were exported with the message\"\
    \ +\n                    \" \\\"n cards have been saved.\\\" where \\\"n\\\" is\
    \ the number of cards exported\");\n        }\n        \n        fileExists =\
    \ checkFileExistence(capitalsNewFile);\n        if (!fileExists) {\n         \
    \   return CheckResult.wrong(\"Your program did not save a file after exporting\"\
    );\n        }\n        \n        empty = isEmpty(capitalsNewFile);\n        if\
    \ (empty) {\n            return CheckResult.wrong(\"The file your program saves\
    \ is empty\");\n        }\n    \n        output = main.execute(\"exit\").toLowerCase();\n\
    \        if (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"\
    Your program should print \\\"Bye bye!\\\" and terminate if the user enters \"\
    \ +\n                    \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    //Test to check \"import\" action\n    @DynamicTestingMethod\n\
    \    CheckResult test6() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start();\n        \n        String output;\n        String lastLine;\n\
    \        String[] lines;\n        boolean fileExists;\n        boolean empty;\n\
    \        \n        output = main.execute(\"import\").toLowerCase();\n        if\
    \ (!output.contains(\"file name\")) {\n            return CheckResult.wrong(\"\
    Your program should prompt the user for the name of the file with the message\
    \ \" +\n                    \"\\\"File name:\\\"\");\n        }\n        \n  \
    \      String nonExistentFile = \"ghost_file.txt\";\n        output = main.execute(nonExistentFile).toLowerCase();\n\
    \        if (!output.contains(\"not found\")) {\n            return CheckResult.wrong(\"\
    Your program should notify the user if the file does not exist with the message\"\
    \ +\n                    \" \\\"File not found.\\\"\");\n        }\n        \n\
    \        lines = output.split(\"\\n\");\n        lastLine = lines[lines.length\
    \ - 1];\n        if (!lastLine.contains(\"input the action\")) {\n           \
    \ return CheckResult.wrong(\"Your program should continue to request an action\
    \ from the user until they \" +\n                    \"enter \\\"exit\\\"\");\n\
    \        }\n        \n        main.execute(\"import\");\n        output = main.execute(capitalsFile).toLowerCase();\n\
    \        if (output.contains(\"not found\")) {\n            return CheckResult.wrong(\"\
    You should be able to import a file that you previously saved.\");\n        }\n\
    \        \n        if (!output.contains(\"2 cards\")) {\n            return CheckResult.wrong(\"\
    Wrong number of cards were imported. Expected 2\");\n        }\n        \n   \
    \     if (!output.contains(\"been loaded\")) {\n            return CheckResult.wrong(\"\
    Your program should notify the user if the cards were imported with the message\"\
    \ +\n                    \" \\\"n cards have been loaded.\\\" where \\\"n\\\"\
    \ is the number of cards in the file\");\n        }\n        \n        lines =\
    \ output.split(\"\\n\");\n        lastLine = lines[lines.length - 1];\n      \
    \  if (!lastLine.contains(\"input the action\")) {\n            return CheckResult.wrong(\"\
    Your program should continue to request an action from the user until they \"\
    \ +\n                    \"enter \\\"exit\\\"\");\n        }\n        \n     \
    \   main.execute(\"remove\");\n        output = main.execute(\"Japan\").toLowerCase();\n\
    \        if (!output.contains(\"card has been removed\")) {\n            return\
    \ CheckResult.wrong(\"You should be able to remove a card that you imported from\
    \ a file\");\n        }\n        \n        main.execute(\"export\");\n       \
    \ output = main.execute(capitalsFile).toLowerCase();\n        if (!output.contains(\"\
    1 card\")) {\n            return CheckResult.wrong(\"Wrong number of cards were\
    \ exported. Expected 1\");\n        }\n        \n        main.execute(\"import\"\
    );\n        output = main.execute(capitalsNewFile).toLowerCase();\n        if\
    \ (!output.contains(\"6 cards\")) {\n            return CheckResult.wrong(\"Wrong\
    \ number of cards were imported. Expected 6\");\n        }\n        \n       \
    \ main.execute(\"export\");\n        output = main.execute(capitalsNewFile).toLowerCase();\n\
    \        if (!output.contains(\"7 cards\")) {\n            return CheckResult.wrong(\"\
    Wrong number of cards were exported. Expected 7\");\n        }\n        \n   \
    \     fileExists = checkFileExistence(capitalsNewFile);\n        if (!fileExists)\
    \ {\n            return CheckResult.wrong(\"Your program did not save a file after\
    \ exporting\");\n        }\n        \n        empty = isEmpty(capitalsNewFile);\n\
    \        if (empty) {\n            return CheckResult.wrong(\"The file your program\
    \ saves is empty\");\n        }\n    \n        output = main.execute(\"exit\"\
    ).toLowerCase();\n        if (!output.contains(\"bye\")) {\n            return\
    \ CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    //Test to check\
    \ \"ask\" action\n    @DynamicTestingMethod\n    CheckResult test7() {\n     \
    \   TestedProgram main = new TestedProgram();\n        main.start();\n       \
    \ \n        String output;\n        String lastLine;\n        String[] lines;\n\
    \        \n        main.execute(\"add\");\n        main.execute(\"France\");\n\
    \        main.execute(\"Eiffel Tower\");\n        \n        main.execute(\"import\"\
    );\n        output = main.execute(capitalsFile).toLowerCase();\n        if (!output.contains(\"\
    1 card\")) {\n            return CheckResult.wrong(\"Wrong number of cards were\
    \ imported. Expected 1\");\n        }\n        \n        if (!output.contains(\"\
    been loaded\")) {\n            return CheckResult.wrong(\"Your program should\
    \ notify the user if the cards were imported with the message\" +\n          \
    \          \" \\\"n cards have been loaded.\\\" where \\\"n\\\" is the number\
    \ of cards in the file\");\n        }\n        \n        output = main.execute(\"\
    ask\").toLowerCase();\n        if (!output.contains(\"times\")) {\n          \
    \  return CheckResult.wrong(\"Your program should prompt the user for the number\
    \ of cards they want to be \" +\n                    \"asked about with the message\
    \ \\\"How many times to ask?\\\"\");\n        }\n        \n        \n        output\
    \ = main.execute(\"1\").toLowerCase();\n        if (!output.contains(\"\\\"france\\\
    \"\")) {\n            return CheckResult.wrong(\"Your program should print the\
    \ definition requested for in quotes\");\n        }\n        \n        if (!output.contains(\"\
    definition\")) {\n            return CheckResult.wrong(\"Your program should prompt\
    \ the user for the definition of a card with the \" +\n                    \"\
    message \\\" Print the definition of \\\"term\\\": where \\\"term\\\" is the term\
    \ of the flashcard to be \" +\n                    \"checked\");\n        }\n\
    \        \n        output = main.execute(\"Eiffel Tower\").toLowerCase();\n  \
    \      if (output.equals(\"correct!\")) {\n            return CheckResult.wrong(\"\
    If the program's memory already has a card that is also contained in the file\
    \ \" +\n                    \"imported, then the definition of the card from the\
    \ file should overwrite the one in the \" +\n                    \"program's memory\"\
    );\n        }\n        \n        if (!output.contains(\"wrong. the right answer\
    \ is \\\"paris\\\"\")) {\n            return CheckResult.wrong(\"Your program\
    \ should print \\\"Wrong\\\" followed by the correct definition in quotes\" +\n\
    \                    \" if the user inputs the wrong definition\");\n        }\n\
    \        \n        lines = output.split(\"\\n\");\n        lastLine = lines[lines.length\
    \ - 1];\n        if (!lastLine.contains(\"input the action\")) {\n           \
    \ return CheckResult.wrong(\"Your program should request an action from the user\
    \ if there are no more cards \" +\n                    \"to ask\");\n        }\n\
    \        \n        main.execute(\"ask\");\n        main.execute(\"1\");\n    \
    \    output = main.execute(\"Paris\").toLowerCase();\n        lines = output.split(\"\
    \\n\");\n        \n        if (!lines[0].equals(\"correct!\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Correct!\\\" if the\
    \ user inputs the correct \" +\n                    \"definition\");\n       \
    \ }\n    \n        output = main.execute(\"exit\").toLowerCase();\n        if\
    \ (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"Your program\
    \ should print \\\"Bye bye!\\\" and terminate if the user enters \" +\n      \
    \              \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    @DynamicTestingMethod\n    CheckResult test8() {\n        TestedProgram\
    \ main = new TestedProgram();\n        main.start();\n        \n        int index;\n\
    \        String output;\n        String term;\n        String lastLine;\n    \
    \    String[] lines;\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            main.execute(\"add\");\n            main.execute(listOfTerms.get(i));\n\
    \            main.execute(listOfDefinitions.get(i));\n        }\n        \n  \
    \      main.execute(\"ask\");\n        output = main.execute(\"6\").toLowerCase();\n\
    \        term = getTerm(output);\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            index = listOfTerms.indexOf(term);\n\n            if (index\
    \ == -1) {\n                return CheckResult.wrong(\"The card \\\"\" + term\
    \ + \"\\\" wasn't added, but you ask to enter its definition!\");\n          \
    \  }\n\n            output = main.execute(listOfDefinitions.get(index)).toLowerCase();\n\
    \            lines = output.split(\"\\n\");\n            lastLine = lines[lines.length\
    \ - 1];\n            \n            if (!lines[0].equals(\"correct!\")) {\n   \
    \             return CheckResult.wrong(\"Your program should print \\\"Correct!\\\
    \" if the user inputs the correct\" +\n                        \" definition\"\
    );\n            }\n            \n            if (i == listOfTerms.size() - 1)\
    \ {\n                \n                if (!lastLine.contains(\"input the action\"\
    )) {\n                    return CheckResult.wrong(\"Your program should request\
    \ an action from the user if there are no more cards \" +\n                  \
    \          \"to ask\");\n                }\n            } else {\n           \
    \     term = getTerm(lastLine);\n            }\n            \n        }\n    \n\
    \        output = main.execute(\"exit\").toLowerCase();\n        if (!output.contains(\"\
    bye\")) {\n            return CheckResult.wrong(\"Your program should print \\\
    \"Bye bye!\\\" and terminate if the user enters \" +\n                    \"\\\
    \"exit\\\"\");\n        }\n    \n        if (!main.isFinished()) {\n         \
    \   return CheckResult.wrong(\"Your program should terminate if the user enters\
    \ \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    @DynamicTestingMethod\n    CheckResult test9() {\n        TestedProgram\
    \ main = new TestedProgram();\n        main.start();\n        \n        int index;\n\
    \        String output;\n        String term;\n        String lastLine;\n    \
    \    String[] lines;\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            main.execute(\"add\");\n            main.execute(listOfTerms.get(i));\n\
    \            main.execute(listOfDefinitions.get(i));\n        }\n        \n  \
    \      main.execute(\"ask\");\n        output = main.execute(\"6\").toLowerCase();\n\
    \        term = getTerm(output);\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            index = listOfTerms.indexOf(term);\n\n            if (index\
    \ == -1) {\n                return CheckResult.wrong(\"The card \\\"\" + term\
    \ + \"\\\" wasn't added, but you ask to enter its definition!\");\n          \
    \  }\n            \n            output = main.execute(listOfAddedDefinitions.get(index)).toLowerCase();\n\
    \            lines = output.split(\"\\n\");\n            lastLine = lines[lines.length\
    \ - 1];\n            \n            if (!lines[0].contains(\"wrong. the right answer\
    \ is \\\"\" + listOfDefinitions.get(index) + \"\\\"\")) {\n                return\
    \ CheckResult.wrong(\"Your program should print \\\"Wrong\\\" followed by the\
    \ correct definition\" +\n                        \" in quotes if the user inputs\
    \ the wrong definition\");\n            }\n            \n            if (i ==\
    \ listOfTerms.size() - 1) {\n                \n                if (!lastLine.contains(\"\
    input the action\")) {\n                    return CheckResult.wrong(\"Your program\
    \ should request an action from the user if there are no more cards \" +\n   \
    \                         \"to ask\");\n                }\n            } else\
    \ {\n                term = getTerm(lastLine);\n            }\n            \n\
    \        }\n    \n        output = main.execute(\"exit\").toLowerCase();\n   \
    \     if (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"\
    Your program should print \\\"Bye bye!\\\" and terminate if the user enters \"\
    \ +\n                    \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    @DynamicTestingMethod\n    CheckResult test10() {\n        TestedProgram\
    \ main = new TestedProgram();\n        main.start();\n        \n        int wrongIndex;\n\
    \        int index;\n        String output;\n        String term;\n        String\
    \ lastLine;\n        String[] lines;\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            main.execute(\"add\");\n            main.execute(listOfTerms.get(i));\n\
    \            main.execute(listOfDefinitions.get(i));\n        }\n        \n  \
    \      main.execute(\"ask\");\n        output = main.execute(\"6\").toLowerCase();\n\
    \        term = getTerm(output);\n        \n        for (int i = 0; i < listOfTerms.size();\
    \ i++) {\n            index = listOfTerms.indexOf(term);\n\n            if (index\
    \ == -1) {\n                return CheckResult.wrong(\"The card \\\"\" + term\
    \ + \"\\\" wasn't added, but you ask to enter its definition!\");\n          \
    \  }\n\n            wrongIndex = index == listOfDefinitions.size() - 1 ? index\
    \ - 1 : index + 1;\n\n            output = main.execute(listOfDefinitions.get(wrongIndex)).toLowerCase();\n\
    \            lines = output.split(\"\\n\");\n            lastLine = lines[lines.length\
    \ - 1];\n            \n            if (!lines[0].contains(\"wrong. the right answer\
    \ is \\\"\" + listOfDefinitions.get(index) + \"\\\"\")) {\n                return\
    \ CheckResult.wrong(\"Your program should print \\\"Wrong\\\" followed by the\
    \ correct definition\" +\n                        \" in quotes if the user inputs\
    \ the wrong definition\");\n            }\n            \n            if (!lines[0].contains(\"\
    correct for \\\"\" + listOfTerms.get(wrongIndex) + \"\\\"\")) {\n            \
    \    return CheckResult.wrong(\"Your output should also contain \\\"but your definition\
    \ is correct for 'term'\" +\n                        \" \\\"\");\n           \
    \ }\n            \n            if (i == listOfTerms.size() - 1) {\n          \
    \      \n                if (!lastLine.contains(\"input the action\")) {\n   \
    \                 return CheckResult.wrong(\"Your program should request an action\
    \ from the user if there are no more cards \" +\n                            \"\
    to ask\");\n                }\n            } else {\n                term = getTerm(lastLine);\n\
    \            }\n            \n        }\n    \n        output = main.execute(\"\
    exit\").toLowerCase();\n        if (!output.contains(\"bye\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    //Test to check\
    \ the \"hardest card\" action\n    @DynamicTestingMethod\n    CheckResult test11()\
    \ {\n        TestedProgram main = new TestedProgram();\n        main.start();\n\
    \        \n        String output;\n        String lastLine;\n        String[]\
    \ lines;\n        \n        output = main.execute(\"hardest card\").toLowerCase();\n\
    \        lines = output.split(\"\\n\");\n        lastLine = lines[lines.length\
    \ - 1];\n        \n        if (!output.contains(\"no cards with errors\")) {\n\
    \            return CheckResult.wrong(\"Your program should print \\\"There are\
    \ no cards with errors.\\\" if there are no \" +\n                    \"cards\
    \ with errors\");\n        }\n        \n        if (!lastLine.contains(\"input\
    \ the action\")) {\n            return CheckResult.wrong(\"Your program should\
    \ continue to request an action from the user until they enter\" +\n         \
    \           \" \\\"exit\\\"\");\n        }\n        \n        main.execute(\"\
    add\");\n        main.execute(\"France\");\n        main.execute(\"Paris\");\n\
    \        \n        main.execute(\"ask\");\n        main.execute(\"1\");\n    \
    \    main.execute(\"Eiffel Tower\");\n        \n        main.execute(\"ask\");\n\
    \        main.execute(\"1\");\n        main.execute(\"Lyon\");\n        \n   \
    \     output = main.execute(\"hardest card\").toLowerCase();\n        if (!output.contains(\"\
    the hardest card is\")) {\n            return CheckResult.wrong(\"Your program\
    \ should show the user the hardest card(s) in the format\" +\n               \
    \     \" \\\"The hardest card is \\\"card\\\". You have n errors answering it.\\\
    \"\");\n        }\n        \n        if (!output.contains(\"errors answering it\"\
    )) {\n            return CheckResult.wrong(\"Your program should show the user\
    \ the hardest card(s) in the format\" +\n                    \" \\\"The hardest\
    \ card is \\\"card\\\". You have n errors answering it.\\\"\");\n        }\n \
    \       \n        if (!output.contains(\"\\\"france\\\"\")) {\n            return\
    \ CheckResult.wrong(\"Your program should print the hardest card in quotes\");\n\
    \        }\n        \n        if (!output.contains(\"2\")) {\n            return\
    \ CheckResult.wrong(\"Your program shows wrong number of errors. Expected 2\"\
    );\n        }\n        \n        main.execute(\"export\");\n        main.execute(capitalsFile);\n\
    \    \n        output = main.execute(\"exit\").toLowerCase();\n        if (!output.contains(\"\
    bye\")) {\n            return CheckResult.wrong(\"Your program should print \\\
    \"Bye bye!\\\" and terminate if the user enters \" +\n                    \"\\\
    \"exit\\\"\");\n        }\n    \n        if (!main.isFinished()) {\n         \
    \   return CheckResult.wrong(\"Your program should terminate if the user enters\
    \ \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    @DynamicTestingMethod\n    CheckResult test12() {\n        TestedProgram\
    \ main = new TestedProgram();\n        main.start();\n        \n        String\
    \ output;\n        \n        main.execute(\"add\");\n        main.execute(\"Russia\"\
    );\n        main.execute(\"Moscow\");\n        \n        main.execute(\"ask\"\
    );\n        main.execute(\"1\");\n        main.execute(\"Saint Petersburg\");\n\
    \        \n        main.execute(\"ask\");\n        main.execute(\"1\");\n    \
    \    main.execute(\"Saint Petersburg\");\n        \n        main.execute(\"ask\"\
    );\n        main.execute(\"1\");\n        main.execute(\"Saint Petersburg\");\n\
    \        \n        output = main.execute(\"hardest card\").toLowerCase();\n  \
    \      if (!output.contains(\"the hardest card is\")) {\n            return CheckResult.wrong(\"\
    Your program should show the user the hardest card(s) in the format\" +\n    \
    \                \" \\\"The hardest card is \\\"card\\\". You have n errors answering\
    \ it.\\\"\");\n        }\n        \n        if (!output.contains(\"errors answering\
    \ it\")) {\n            return CheckResult.wrong(\"Your program should show the\
    \ user the hardest card(s) in the format\" +\n                    \" \\\"The hardest\
    \ card is \\\"card\\\". You have n errors answering it.\\\"\");\n        }\n \
    \       \n        if (!output.contains(\"\\\"russia\\\"\")) {\n            return\
    \ CheckResult.wrong(\"Your program should print the hardest card in quotes\");\n\
    \        }\n        \n        if (!output.contains(\"3\")) {\n            return\
    \ CheckResult.wrong(\"Your program shows wrong number of errors. Expected 3\"\
    );\n        }\n        \n        main.execute(\"export\");\n        main.execute(capitalsNewFile);\n\
    \    \n        output = main.execute(\"exit\").toLowerCase();\n        if (!output.contains(\"\
    bye\")) {\n            return CheckResult.wrong(\"Your program should print \\\
    \"Bye bye!\\\" and terminate if the user enters \" +\n                    \"\\\
    \"exit\\\"\");\n        }\n    \n        if (!main.isFinished()) {\n         \
    \   return CheckResult.wrong(\"Your program should terminate if the user enters\
    \ \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    @DynamicTestingMethod\n    CheckResult test13() {\n        TestedProgram\
    \ main = new TestedProgram();\n        main.start();\n        \n        String\
    \ output;\n        \n        main.execute(\"import\");\n        main.execute(capitalsFile);\n\
    \        \n        main.execute(\"import\");\n        main.execute(capitalsNewFile);\n\
    \        \n        output = main.execute(\"hardest card\").toLowerCase();\n  \
    \      if (output.contains(\"no cards with errors\")) {\n            return CheckResult.wrong(\"\
    Your program should print the hardest card(s) if such card(s) exists\");\n   \
    \     }\n        \n        if (!output.contains(\"the hardest card is\")) {\n\
    \            return CheckResult.wrong(\"Your program should show the user the\
    \ hardest card(s) in the format\" +\n                    \" \\\"The hardest card\
    \ is \\\"card\\\". You have n errors answering it.\\\"\");\n        }\n      \
    \  \n        if (!output.contains(\"errors answering it\")) {\n            return\
    \ CheckResult.wrong(\"Your program should show the user the hardest card(s) in\
    \ the format\" +\n                    \" \\\"The hardest card is \\\"card\\\"\
    . You have n errors answering it.\\\"\");\n        }\n        \n        if (output.contains(\"\
    france\")) {\n            return CheckResult.wrong(\"Your program printed the\
    \ wrong card\");\n        }\n        \n        if (!output.contains(\"\\\"russia\\\
    \"\")) {\n            return CheckResult.wrong(\"Your program should print the\
    \ hardest card in quotes\");\n        }\n        \n        if (!output.contains(\"\
    3\")) {\n            return CheckResult.wrong(\"Your program shows wrong number\
    \ of errors. Expected 3\");\n        }\n    \n        output = main.execute(\"\
    exit\").toLowerCase();\n        if (!output.contains(\"bye\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    @DynamicTestingMethod\n\
    \    CheckResult test14() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start();\n        \n        String output;\n        \n        main.execute(\"\
    import\");\n        main.execute(capitalsFile);\n        \n        main.execute(\"\
    ask\");\n        main.execute(\"1\");\n        main.execute(\"Lyon\");\n     \
    \   \n        main.execute(\"import\");\n        main.execute(capitalsNewFile);\n\
    \        \n        output = main.execute(\"hardest card\").toLowerCase();\n  \
    \      if (output.contains(\"no cards with errors\")) {\n            return CheckResult.wrong(\"\
    Your program should print the hardest card(s) if such card(s) exists\");\n   \
    \     }\n        \n        if (!output.contains(\"hardest cards are\")) {\n  \
    \          return CheckResult.wrong(\"Your program should show the user the hardest\
    \ card(s) in the format\" +\n                    \" \\\"The hardest cards are\
    \ \\\"card#1\\\", \\\"card#2\\\"...\\\"card#n\\\". You have n errors answering\
    \ them\" +\n                    \".\\\"\");\n        }\n        \n        if (!output.contains(\"\
    errors answering them\")) {\n            return CheckResult.wrong(\"Your program\
    \ should show the user the hardest card(s) in the format \\\"The \" +\n      \
    \              \"hardest cards are \\\"card#1\\\", \\\"card#2\\\"...\\\"card#n\\\
    \". You have n errors answering them\\\".\");\n        }\n        \n        if\
    \ (!output.contains(\"france\")) {\n            return CheckResult.wrong(\"Your\
    \ program should print all the cards with the highest number of errors\");\n \
    \       }\n        \n        if (!output.contains(\"russia\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print all the cards with the\
    \ highest number of errors\");\n        }\n        \n        if (!output.contains(\"\
    \\\"france\\\"\")) {\n            return CheckResult.wrong(\"Your program should\
    \ print the hardest card(s) in quotes\");\n        }\n        \n        if (!output.contains(\"\
    \\\"russia\\\"\")) {\n            return CheckResult.wrong(\"Your program should\
    \ print the hardest card(s) in quotes\");\n        }\n    \n        output = main.execute(\"\
    exit\").toLowerCase();\n        if (!output.contains(\"bye\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    //Test to check\
    \ the \"reset stats\" action\n    @DynamicTestingMethod\n    CheckResult test15()\
    \ {\n        TestedProgram main = new TestedProgram();\n        main.start();\n\
    \        \n        String output;\n        \n        main.execute(\"hardest card\"\
    );\n        \n        main.execute(\"import\");\n        main.execute(capitalsFile);\n\
    \        \n        main.execute(\"hardest card\");\n        \n        main.execute(\"\
    ask\");\n        main.execute(\"1\");\n        main.execute(\"Tokyo\");\n    \
    \    \n        main.execute(\"hardest card\");\n        \n        main.execute(\"\
    import\");\n        main.execute(capitalsNewFile);\n        \n        output =\
    \ main.execute(\"reset stats\").toLowerCase();\n        if (!output.contains(\"\
    statistics have been reset\")) {\n            return CheckResult.wrong(\"Your\
    \ program should notify the user if the stats have been reset with the \" +\n\
    \                    \"message \\\"Card statistics have been reset.\\\"\");\n\
    \        }\n        \n        output = main.execute(\"hardest card\").toLowerCase();\n\
    \        if (!output.contains(\"no cards with errors\")) {\n            return\
    \ CheckResult.wrong(\"Your program should reset the errors of all the cards back\
    \ to zero\");\n        }\n    \n        output = main.execute(\"exit\").toLowerCase();\n\
    \        if (!output.contains(\"bye\")) {\n            return CheckResult.wrong(\"\
    Your program should print \\\"Bye bye!\\\" and terminate if the user enters \"\
    \ +\n                    \"\\\"exit\\\"\");\n        }\n    \n        if (!main.isFinished())\
    \ {\n            return CheckResult.wrong(\"Your program should terminate if the\
    \ user enters \\\"exit\\\"\");\n        }\n        \n        return CheckResult.correct();\n\
    \    }\n    \n    //Test to check the \"log\" action\n    @DynamicTestingMethod\n\
    \    CheckResult test16() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start();\n        \n        String output;\n        \n        main.execute(\"\
    hardest card\");\n        \n        main.execute(\"import\");\n        main.execute(capitalsFile);\n\
    \        \n        main.execute(\"hardest card\");\n        \n        main.execute(\"\
    ask\");\n        main.execute(\"1\");\n        main.execute(\"Tokyo\");\n    \
    \    \n        main.execute(\"hardest card\");\n        \n        output = main.execute(\"\
    reset stats\").toLowerCase();\n        if (!output.contains(\"statistics have\
    \ been reset\")) {\n            return CheckResult.wrong(\"Your program should\
    \ notify the user if the stats have been reset with the \" +\n               \
    \     \"message \\\"Card statistics have been reset.\\\"\");\n        }\n    \
    \    \n        output = main.execute(\"hardest card\").toLowerCase();\n      \
    \  if (!output.contains(\"no cards with errors\")) {\n            return CheckResult.wrong(\"\
    Your program should reset the errors of all the cards back to zero\");\n     \
    \   }\n        \n        output = main.execute(\"log\").toLowerCase();\n     \
    \   if (!output.contains(\"file name\")) {\n            return CheckResult.wrong(\"\
    Your program should prompt the user for the name of the file to be saved with\
    \ \" +\n                    \"the message \\\"File name:\\\"\");\n        }\n\
    \        \n        output = main.execute(\"todayLog.txt\").toLowerCase();\n  \
    \      if (!output.contains(\"log has been saved\")) {\n            return CheckResult.wrong(\"\
    Your program should notify the user if the log file was saved with the message\"\
    \ +\n                    \" \\\"The log has been saved.\\\"\");\n        }\n \
    \       \n        boolean fileExists = checkFileExistence(\"todayLog.txt\");\n\
    \        if (!fileExists) {\n            return CheckResult.wrong(\"Your program\
    \ did not save the log file\");\n        }\n        \n        boolean validContent\
    \ = checkLogFileLength(\"todayLog.txt\");\n        if (!validContent) {\n    \
    \        return CheckResult.wrong(\"The number of lines your program saves is\
    \ less than the number of lines that \" +\n                    \"was input/output\
    \ to the console\");\n        }\n    \n        output = main.execute(\"exit\"\
    ).toLowerCase();\n        if (!output.contains(\"bye\")) {\n            return\
    \ CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    //Test to check\
    \ command line arguments\"\n    @DynamicTestingMethod\n    CheckResult test17()\
    \ {\n        TestedProgram main = new TestedProgram();\n        main.start(\"\
    -export\", \"fridayThe13th.txt\");\n        \n        String output;\n       \
    \ String[] lines;\n        \n        output = main.execute(\"hardest card\").toLowerCase();\n\
    \        lines = output.split(\"\\n\");\n        if (lines[0].contains(\"hardest\
    \ card\")) {\n            return CheckResult.wrong(\"The initial set of cards\
    \ should be empty if no import argument is provided\");\n        }\n        \n\
    \        main.execute(\"add\");\n        main.execute(\"Movie\");\n        main.execute(\"\
    A recorded sequence of images displayed on a screen at a rate sufficiently fast\"\
    );\n    \n        output = main.execute(\"exit\").toLowerCase();\n        if (!output.contains(\"\
    bye\")) {\n            return CheckResult.wrong(\"Your program should print \\\
    \"Bye bye!\\\" and terminate if the user enters \" +\n                    \"\\\
    \"exit\\\"\");\n        }\n        \n        boolean fileExist = checkFileExistence(\"\
    fridayThe13th.txt\");\n        if (!fileExist) {\n            return CheckResult.wrong(\"\
    Your program did not save a file after exiting\");\n        }\n        \n    \
    \    boolean emptyFile = isEmpty(\"fridayThe13th.txt\");\n        if (emptyFile)\
    \ {\n            return CheckResult.wrong(\"The file your program saves is empty\"\
    );\n        }\n    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n    \n    @DynamicTestingMethod\n\
    \    CheckResult test18() {\n        TestedProgram main = new TestedProgram();\n\
    \        main.start(\"-export\", \"newFridayThe13th.txt\", \"-import\", \"fridayThe13th.txt\"\
    );\n    \n        String output;\n        \n        main.execute(\"add\");\n \
    \       output = main.execute(\"Movie\").toLowerCase();\n        if (output.contains(\"\
    definition of the card\")) {\n            return CheckResult.wrong(\"Seems like\
    \ your program did not import the file specified in the \" +\n               \
    \     \"command-line argument\");\n        }\n        \n        main.execute(\"\
    remove\");\n        main.execute(\"Movie\");\n        \n        main.execute(\"\
    add\");\n        main.execute(\"Series\");\n        main.execute(\"A television\
    \ program which consists of several episodes\");\n    \n        output = main.execute(\"\
    exit\").toLowerCase();\n        if (!output.contains(\"bye\")) {\n           \
    \ return CheckResult.wrong(\"Your program should print \\\"Bye bye!\\\" and terminate\
    \ if the user enters \" +\n                    \"\\\"exit\\\"\");\n        }\n\
    \    \n        boolean fileExist = checkFileExistence(\"newFridayThe13th.txt\"\
    );\n        if (!fileExist) {\n            return CheckResult.wrong(\"Your program\
    \ did not save a file after exiting\");\n        }\n    \n        boolean emptyFile\
    \ = isEmpty(\"newFridayThe13th.txt\");\n        if (emptyFile) {\n           \
    \ return CheckResult.wrong(\"The file your program saves is empty\");\n      \
    \  }\n    \n        if (!main.isFinished()) {\n            return CheckResult.wrong(\"\
    Your program should terminate if the user enters \\\"exit\\\"\");\n        }\n\
    \        \n        return CheckResult.correct();\n    }\n\n    private boolean\
    \ checkLogFileLength(String fileName) {\n        int lineCount = 0;\n        int\
    \ minimumLineExpected = 30;\n\n        File file = new File(fileName);\n     \
    \   try (BufferedReader reader = new BufferedReader(new FileReader(file))) {\n\
    \            String line;\n            while ((line = reader.readLine()) != null)\
    \ {\n                if (!line.isEmpty())\n                    lineCount++;\n\
    \            }\n        } catch (IOException ignored) {}\n\n        return minimumLineExpected\
    \ < lineCount;\n    }\n    \n    private boolean checkFileExistence(String fileName)\
    \ {\n        File file = new File(fileName);\n        return file.exists();\n\
    \    }\n    \n    private boolean isEmpty(String fileName) {\n        int lineCount\
    \ = 0;\n        \n        File file = new File(fileName);\n        try (BufferedReader\
    \ reader = new BufferedReader(new FileReader(file))) {\n            \n       \
    \     while (reader.readLine() != null) {\n                lineCount++;\n    \
    \        }\n        } catch (IOException e) {}\n        \n        return lineCount\
    \ <= 0;\n    }\n    \n    private String getTerm(String output) {\n        int\
    \ start = output.indexOf(\"\\\"\");\n        int end = output.lastIndexOf(\"\\\
    \"\");\n\n        if (start == -1 || end == - 1) {\n            throw new WrongAnswer(\"\
    The card should be surrounded with \\\"\\\" when you ask to print its definition!\\\
    n\" +\n                \"For example: Print the definition of \\\"str()\\\"\"\
    );\n        }\n        \n        return output.substring((start + 1), end);\n\
    \    }\n    \n    private static List<String> getListOfTerms() {\n        return\
    \ Arrays.asList(\n                \"print()\",\n                \"str()\",\n \
    \               \"son\",\n                \"daughter\",\n                \"uncle\"\
    ,\n                \"ankle\");\n    }\n    \n    private static List<String> getListOfDefinitions()\
    \ {\n        return Arrays.asList(\n                \"outputs text\",\n      \
    \          \"converts to a string\",\n                \"a male child\",\n    \
    \            \"a female child\",\n                \"a brother of one's parent\"\
    ,\n                \"a part of the body where the foot and the leg meet\"\n  \
    \      );\n    }\n    \n    //Extra wrongs invalidate the definition\n    private\
    \ static List<String> getListOfWrongDefinitions1() {\n        return Arrays.asList(\n\
    \                \"outputs text line by line\",\n                \"converts to\
    \ a string and an integer\",\n                \"a male child or a female child\"\
    ,\n                \"a female child or a male child\",\n                \"a brother\
    \ of one's parent or grandparents\",\n                \"a part of the body where\
    \ the foot and the leg meet or the arm\"\n        );\n    }\n    \n    private\
    \ static List<String> getListOfCountries() {\n        return Arrays.asList(\n\
    \                \"Canada\",\n                \"Netherlands\",\n             \
    \   \"Russia\",\n                \"United Kingdom\",\n                \"Nigeria\"\
    ,\n                \"Germany\"\n        );\n    }\n    \n    private static List<String>\
    \ getListOfCapitals() {\n        return Arrays.asList(\n                \"Ottawa\"\
    ,\n                \"Amsterdam\",\n                \"Moscow\",\n             \
    \   \"London\",\n                \"Abuja\",\n                \"Berlin\"\n    \
    \    );\n    }\n    \n}\n"
  learner_created: false
- name: src/flashcards/domain/core/Deck.kt
  visible: true
  text: |-
    package flashcards.domain.core

    // Only dependencies from core domain
    import java.io.Serializable

    /**
     * @see <a href="https://williamdurand.fr/2013/06/03/object-calisthenics/#4-first-class-collections">Object Calisthenics - First Class Collections</a>
     */
    class Deck : Serializable {
        private val cards: MutableCollection<Card> = mutableListOf()
        fun cardsList(): List<Card> = cards.toList()
        fun add(card: Card): Card {
            cards.add(card)
            return card
        }

        fun remove(termOfCardToRemove: String): Boolean {
            return cards.removeIf { it.term == termOfCardToRemove }
        }

        fun numberOfCards(): Int = cards.size
        fun merge(deck: Deck) {
            deck.cardsList().forEach { card ->
                this.merge(card)
            }
        }

        private fun merge(card: Card) {
            cards.removeIf { it.term == card.term }
            cards.add(card)
        }

        fun containsTerm(term: String): Boolean = cards.any { card -> card.term == term }
        fun containsDefinition(definition: String) = cards.any { card -> card.definition == definition }

        fun hardestCards(): List<Card> {
            return cards.filter { it.timesGuessedWrong() > 0 }
                .groupBy { it.timesGuessedWrong() }
                .maxByOrNull { it.key }
                ?.value ?: listOf()
        }

        fun attemptGuess(term: String, guess: String): GuessResult {
            val cardToGuess: Card = cards.firstOrNull { it.term == term }
                ?: return GuessResult(GuessResult.Type.CARD_NOT_FOUND)

            if (cardToGuess.attemptGuess(guess))
                return GuessResult(GuessResult.Type.RIGHT)

            val rightGuessButWrongTerm: Card? =
                cardsList().firstOrNull { it.definition == guess }
            if (rightGuessButWrongTerm != null) {
                return GuessResult(GuessResult.Type.RIGHT_BUT_WRONG_CARD, rightGuessButWrongTerm)
            }
            return GuessResult(GuessResult.Type.WRONG)
        }

        fun resetStats() {
            cards.forEach { it.resetStats() }
        }

        class GuessResult(val type: Type, val rightButForWrongTerm: Card? = null) {
            enum class Type {
                RIGHT, WRONG, RIGHT_BUT_WRONG_CARD, CARD_NOT_FOUND
            }
        }

    }
  learner_created: true
- name: src/flashcards/infrastructure/adapters/ObjectDeckDeSerializer.kt
  visible: true
  text: |-
    package flashcards.infrastructure.adapters

    import flashcards.domain.core.Deck
    import flashcards.domain.ports.DeckDeSerializer
    import java.io.ByteArrayInputStream
    import java.io.ObjectInputStream

    class ObjectDeckDeSerializer : DeckDeSerializer {
        override fun deserialize(rawDeck: ByteArray): Deck {
            return ObjectInputStream(ByteArrayInputStream(rawDeck)).readObject() as Deck
        }
    }
  learner_created: true
- name: src/flashcards/infrastructure/adapters/MutableListLogger.kt
  visible: true
  text: |-
    package flashcards.infrastructure.adapters

    import flashcards.domain.ports.Logger

    class MutableListLogger(private val logs: MutableList<String>) : Logger {
        override fun append(logLine: String) {
            logs.add(logLine)
        }

        override fun asString() = logs.joinToString("\n")
    }
  learner_created: true
- name: src/flashcards/domain/ports/Logger.kt
  visible: true
  text: |
    package flashcards.domain.ports

    // Only dependencies from domain

    interface Logger {
        fun append(logLine: String)
        fun asString(): String
    }
  learner_created: true
- name: src/flashcards/infrastructure/adapters/FilePersistence.kt
  visible: true
  text: |-
    package flashcards.infrastructure.adapters

    import flashcards.domain.ports.Persistance
    import flashcards.domain.ports.PersistanceHandle
    import java.io.File

    class FilePersistence : Persistance {
        override fun handleFor(name: String): PersistanceHandle {
            return FilePersistanceHandle(File(name))
        }

        class FilePersistanceHandle(private val file: File) : PersistanceHandle {
            override fun exists(): Boolean = file.exists()
            override fun writeText(text: String) = file.writeText(text)
            override fun writeBytes(bytes: ByteArray) = file.writeBytes(bytes)
            override fun readBytes(): ByteArray = file.readBytes()
        }
    }
  learner_created: true
- name: src/flashcards/domain/ports/PersistanceHandle.kt
  visible: true
  text: |-
    package flashcards.domain.ports

    // Only dependencies from domain

    interface PersistanceHandle {
        fun exists(): Boolean
        fun writeText(text: String)
        fun writeBytes(bytes: ByteArray)
        fun readBytes(): ByteArray
    }
  learner_created: true
- name: src/flashcards/infrastructure/Main.kt
  visible: true
  text: |-
    package flashcards.infrastructure

    import flashcards.domain.application.CardGuesser
    import flashcards.domain.application.FlashCardsMenu
    import flashcards.domain.core.Card
    import flashcards.domain.core.Deck
    import flashcards.infrastructure.adapters.FilePersistence
    import flashcards.infrastructure.adapters.MutableListLogger
    import flashcards.infrastructure.adapters.ObjectDeckDeSerializer
    import flashcards.infrastructure.adapters.ObjectDeckSerializer
    import java.util.*

    // In this project I try to follow some Software Craftsmanship guidelines
    // short methods, separation of concerns, decouplage, rich OOP, S.O.L.I.D, Ports & Adapters
    //
    // Some rules from Object Calisthenics I try to follow :
    // - 1 level of indentation
    // - First class collections
    // - Don't abbreviate
    // - No getters/setters/Properties (I'm more flexible with this rule, but I enforce it when an attribute is mutable)
    //
    // Domain logic should rely on abstractions
    // This way we keep it clean from I/O, randomness and nondeterministic dependencies
    // Ex. Even simple println() is abstracted so this side effect (print to some output) is moved away from core domain logic

    // =============== Program bootstrapping ===============
    // (glues all the parts together and runs a game)
    fun main() {

        // =========== Setup dependencies ===========
        // Make implicit IO and randomness as explicit dependencies
        // Since those things are not deterministic, we don't want them in our
        // domain logic
        val stdInScanner = Scanner(System.`in`)
        val logger = MutableListLogger(mutableListOf())
        val collectInput: () -> String = { stdInScanner.nextLine().also { logger.append(it) } }
        val printOutput: (output: String) -> Unit = { output -> println(output).also { logger.append(output) } }
        val cardRandomizer: (deck: Deck) -> Card = { deck -> deck.cardsList().random() }
        val deckSerializer = ObjectDeckSerializer()
        val deckDeSerializer = ObjectDeckDeSerializer()
        val dataPersistance = FilePersistence()

        // Create game state
        val deck = Deck()

        // Bind dependencies to the application components
        val cardGuesser = CardGuesser(deck, printOutput, collectInput, cardRandomizer)
        val menu = FlashCardsMenu(
            printOutput,
            collectInput,
            cardGuesser,
            deck,
            deckSerializer,
            deckDeSerializer,
            logger,
            dataPersistance
        )

        menu.loop()
    }
  learner_created: true
- name: src/flashcards/domain/ports/DeckSerializer.kt
  visible: true
  text: |-
    package flashcards.domain.ports

    // Only dependencies from domain
    import flashcards.domain.core.Deck

    interface DeckSerializer {
        fun serialize(deck: Deck): ByteArray
    }
  learner_created: true
- name: src/flashcards/domain/ports/DeckDeSerializer.kt
  visible: true
  text: |-
    package flashcards.domain.ports

    // Only dependencies from domain
    import flashcards.domain.core.Deck

    interface DeckDeSerializer {
        fun deserialize(rawDeck: ByteArray): Deck
    }
  learner_created: true
- name: src/flashcards/domain/ports/Persistance.kt
  visible: true
  text: |-
    package flashcards.domain.ports

    // Only dependencies from domain

    interface Persistance {
        fun handleFor(name: String): PersistanceHandle
    }
  learner_created: true
- name: src/flashcards/domain/application/CardGuesser.kt
  visible: true
  text: |-
    package flashcards.domain.application

    // Only inner dependencies & dependencies to ports & domain
    import flashcards.domain.core.Card
    import flashcards.domain.core.Deck
    import  flashcards.domain.core.Deck.GuessResult.Type.*

    class CardGuesser(
        private val deck: Deck,
        private val printOutput: (output: String) -> Unit,
        private val collectInput: () -> String,
        private val cardRandomizer: (deck: Deck) -> Card
    ) {
        fun guessRandomCard() = guess(cardRandomizer(deck))

        private fun guess(cardToGuess: Card) {
            printOutput("""Print the definition of "${cardToGuess.term}":""")
            val guess = collectInput()
            printOutput(formatAnswerGuessing(guess, cardToGuess))
        }

        private fun formatAnswerGuessing(guess: String, cardToGuess: Card): String {
            val guessResult = deck.attemptGuess(cardToGuess.term, guess)
            return when (guessResult.type) {
                RIGHT -> "Correct!"
                WRONG -> """Wrong. The right answer is "${cardToGuess.definition}"."""
                RIGHT_BUT_WRONG_CARD -> """Wrong. The right answer is "${cardToGuess.definition}". but your definition is correct for "${guessResult.rightButForWrongTerm?.term}" """
                CARD_NOT_FOUND -> "Card not found!"
            }
        }


    }
  learner_created: true
- name: src/flashcards/infrastructure/adapters/ObjectDeckSerializer.kt
  visible: true
  text: |-
    package flashcards.infrastructure.adapters

    import flashcards.domain.core.Deck
    import flashcards.domain.ports.DeckSerializer
    import java.io.ByteArrayOutputStream
    import java.io.ObjectOutputStream

    class ObjectDeckSerializer : DeckSerializer {
        override fun serialize(deck: Deck): ByteArray {
            val byteArrayOutputStream = ByteArrayOutputStream()
            ObjectOutputStream(byteArrayOutputStream).writeObject(deck)
            return byteArrayOutputStream.toByteArray()
        }
    }
  learner_created: true
- name: src/flashcards/domain/application/FlashCardsMenu.kt
  visible: true
  text: |-
    package flashcards.domain.application

    // Only inner dependencies & dependencies to ports & domain
    import flashcards.domain.application.FlashCardsMenu.MenuOption.*
    import flashcards.domain.core.Card
    import flashcards.domain.core.Deck
    import flashcards.domain.ports.DeckDeSerializer
    import flashcards.domain.ports.DeckSerializer
    import flashcards.domain.ports.Logger
    import flashcards.domain.ports.Persistance
    import flashcards.domain.ports.PersistanceHandle

    class FlashCardsMenu(
        private val printOutput: (output: String) -> Unit,
        private val collectInput: () -> String,
        private val cardGuesser: CardGuesser,
        private val deck: Deck,
        private val deckSerializer: DeckSerializer,
        private val deckDeSerializer: DeckDeSerializer,
        private val logger: Logger,
        private val dataPersistance: Persistance
    ) {
        private enum class MenuOption(val code: String) {
            ADD("add"),
            REMOVE("remove"),
            IMPORT("import"),
            EXPORT("export"),
            ASK("ask"),
            EXIT("exit"),
            LOG("log"),
            HARDEST_CARD("hardest card"),
            RESET_STATS("reset stats"),
            UNSUPPORTED("");

            companion object {
                fun fromCode(code: String): MenuOption {
                    return values().find { options -> options.code == code } ?: UNSUPPORTED
                }
            }
        }

        fun loop() {
            var choice: MenuOption
            do {
                choice = promptAction()
                runAction(choice)
            } while (EXIT != choice)
        }

        private fun runAction(choice: MenuOption) {
            when (choice) {
                ADD -> addCardToDeck()
                EXPORT -> exportDeck()
                IMPORT -> importDeck()
                REMOVE -> removeCard()
                ASK -> askSeveralTimes()
                EXIT -> showExitMessage()
                LOG -> saveLogs()
                HARDEST_CARD -> hardestCard()
                RESET_STATS -> resetStats()
                UNSUPPORTED -> notifyUnsupportedChoice(choice)
            }
        }

        private fun addCardToDeck() {
            val term = inputTermForNewCard(deck) ?: return
            val definition = inputDefinitionForNewCard(deck) ?: return
            deck.add(Card(term, definition))
            printOutput("""The pair ("$term":"$definition") has been added""")
        }

        private fun promptAction(): MenuOption {
            printOutput("Input the action (add, remove, import, export, ask, exit):")
            val input: String = collectInput()
            return MenuOption.fromCode(input)
        }

        private fun inputTermForNewCard(deck: Deck): String? {
            printOutput("Card:")
            val term = collectInput()

            if (deck.containsTerm(term)) {
                printOutput("""The card "$term" already exists""")
                return null
            }
            return term
        }

        private fun inputDefinitionForNewCard(deck: Deck): String? {
            printOutput("The definition of the card:")
            val definition = collectInput()

            if (deck.containsDefinition(definition)) {
                printOutput("""The definition "$definition" already exists. Try again: """)
                return null
            }
            return definition
        }

        private fun exportDeck() {
            val flashcardsFile = promptForFile()
            val serializedDeck = deckSerializer.serialize(deck)
            flashcardsFile.writeBytes(serializedDeck)
            printOutput("${deck.numberOfCards()} cards have been saved.")
        }

        private fun importDeck() {
            val deckFile = promptForFile()
            if (!deckFile.exists()) {
                printOutput("File not found.")
            } else {
                val rawDeck = deckFile.readBytes()
                val loadedDeck = deckDeSerializer
                    .deserialize(rawDeck)
                printOutput("${loadedDeck.numberOfCards()} cards have been loaded.")
                deck.merge(loadedDeck)
            }
        }

        private fun promptForFile(): PersistanceHandle {
            printOutput("File name:")
            return dataPersistance.handleFor(collectInput())
        }

        private fun removeCard() {
            printOutput("Which card?")
            val termOfCard = collectInput()
            if (deck.remove(termOfCard)) {
                printOutput("The card has been removed")
            } else {
                printOutput("""Can't remove "$termOfCard": there is no such card.""")
            }
        }

        private fun askSeveralTimes() {
            printOutput("How many times to ask?")
            val timesToAsk = collectInput().toInt()
            repeat(timesToAsk) { cardGuesser.guessRandomCard() }
        }

        private fun showExitMessage() {
            printOutput("Bye bye!")
        }

        private fun saveLogs() {
            val logFile = promptForFile()
            logFile.writeText(logger.asString())
            printOutput("The log has been saved.7")
        }

        private fun hardestCard() {
            val hardestCards = deck.hardestCards()
            when {
                hardestCards.isEmpty() -> {
                    printOutput("There are no cards with errors.")
                }
                hardestCards.size == 1 -> {
                    val hardestCard = hardestCards.single()
                    printOutput("The hardest card is \"${hardestCard.term}\". You have ${hardestCard.timesGuessedWrong()} errors answering it.")
                }
                else -> {
                    val terms = hardestCards.joinToString(", ") { "\"${it.term}\"" }
                    val timesGuessedWrong = hardestCards.first().timesGuessedWrong()
                    printOutput("The hardest cards are $terms. You have $timesGuessedWrong errors answering them.")
                }
            }
        }

        private fun resetStats() {
            deck.resetStats()
            printOutput("Card statistics have been reset.")
        }

        private fun notifyUnsupportedChoice(choice: MenuOption) {
            printOutput("""The command "$choice" is not supported.""")
        }
    }
  learner_created: true
- name: src/flashcards/domain/core/Card.kt
  visible: true
  text: |-
    package flashcards.domain.core

    // Only dependencies from core domain
    import java.io.Serializable

    class Card(
        val term: String,
        val definition: String,
        private var timesGuessedWrong: Int = 0
    ) : Serializable {

        // Accessor for times guessed wrong
        // because it should not be changed from outside
        fun timesGuessedWrong(): Int {
            return timesGuessedWrong
        }

        fun resetStats() {
            timesGuessedWrong = 0
        }

        fun attemptGuess(guess: String): Boolean {
            return if (guess != definition) {
                timesGuessedWrong++
                false
            } else {
                true
            }
        }
    }
  learner_created: true
- name: src/flashcards/domain/application/DeckExporter.kt
  visible: true
  learner_created: true
- name: src/flashcards/domain/application/DeckImporter.kt
  visible: true
  learner_created: true
feedback_link: https://hyperskill.org/learn/step/7492#comment
status: Solved
feedback:
  message: Well done! You've finished the project. Select a new project on <a href="https://hyperskill.org/projects">JetBrains
    Academy</a> to continue learning.
  time: Tue, 30 Nov 2021 23:57:43 UTC
record: -1
