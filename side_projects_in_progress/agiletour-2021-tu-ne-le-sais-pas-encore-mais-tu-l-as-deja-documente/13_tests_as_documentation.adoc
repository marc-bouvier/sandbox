== Tests as documentation

[.notes]
--
* exemples de bons et de mauvais tests
* les tests peuvent montrer comment utiliser les API publiques de notre systeme
* Nested tests
* Describe annotation
--

=== Spring

Spring Rest Docs

[.notes]
--
* https://spring.io/projects/spring-restdocs[Spring Rest Docs]
* https://www.youtube.com/watch?v=v--zkIEciq4[BDX I/O 2019 - Architecture Hexagonale Level 2: Comment bien écrire vos tests - Julien Topçu et Jordan Nourry]
* Mécanisme de réconciliation = Spring Rest Docs
* Le test te force d'avoir ta doc a jour
----
# in WSL
git clone git@github.com:spring-projects/spring-restdocs.git
git checkout v2.0.5.RELEASE
sdk use java 8.0.272-zulu
sdk use gradle 4.9
cd cd samples/web-test-client
gradle build
# Ouvrir le html généré par le Asciidoc
# Dans Vs Code
# Ouvrir le test
# Ouvrir le controller
# Changer le texte dans le controller : "Hello Agile Tour Strasbourg!"
gradle build
# Tant pis si j'ai pas réussi à forcer l'assert
----
--

[.refs]
--
* https://www.youtube.com/watch?v=v--zkIEciq4&t=1378s[BDX I/O 2019 - Architecture Hexagonale Level 2: Comment bien écrire vos tests - Julien Topçu et Jordan Nourry] 22m58s - 27m30s
* https://gitlab.com/crafts-records/talkadvisor/talkadvisor-back[Gitlab - Crafts-Records Talkadvisor ]
--

